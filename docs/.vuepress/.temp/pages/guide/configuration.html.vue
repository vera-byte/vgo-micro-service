<template><div><h1 id="é…ç½®è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#é…ç½®è¯¦è§£">#</a> é…ç½®è¯¦è§£</h1>
<p>æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»VGOå¾®æœåŠ¡çš„é…ç½®é€‰é¡¹ï¼Œå¸®åŠ©æ‚¨æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ã€‚</p>
<h2 id="ğŸ“-é…ç½®æ–‡ä»¶ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ğŸ“-é…ç½®æ–‡ä»¶ç»“æ„">#</a> ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„</h2>
<p>VGOä½¿ç”¨YAMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä½ç½®ä¸º <code v-pre>config/config.yaml</code>ã€‚é…ç½®æ–‡ä»¶åŒ…å«ä»¥ä¸‹ä¸»è¦éƒ¨åˆ†ï¼š</p>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token comment"># æœåŠ¡åŸºæœ¬é…ç½®</span></span>
<span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">grpc_port</span><span class="token punctuation">:</span> <span class="token string">"50051"</span></span>
<span class="line">  <span class="token key atrule">http_port</span><span class="token punctuation">:</span> <span class="token string">"8080"</span></span>
<span class="line">  <span class="token key atrule">debug_mode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ•°æ®åº“é…ç½®</span></span>
<span class="line"><span class="token key atrule">database</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">dsn</span><span class="token punctuation">:</span> <span class="token string">"postgres://user:password@localhost:5432/dbname?sslmode=disable"</span></span>
<span class="line">  <span class="token key atrule">max_open_conns</span><span class="token punctuation">:</span> <span class="token number">25</span></span>
<span class="line">  <span class="token key atrule">max_idle_conns</span><span class="token punctuation">:</span> <span class="token number">5</span></span>
<span class="line">  <span class="token key atrule">conn_max_lifetime</span><span class="token punctuation">:</span> <span class="token string">"1h"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç¼“å­˜é…ç½®</span></span>
<span class="line"><span class="token key atrule">redis</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">addr</span><span class="token punctuation">:</span> <span class="token string">"localhost:6379"</span></span>
<span class="line">  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">""</span></span>
<span class="line">  <span class="token key atrule">db</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
<span class="line">  <span class="token key atrule">pool_size</span><span class="token punctuation">:</span> <span class="token number">10</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®‰å…¨é…ç½®</span></span>
<span class="line"><span class="token key atrule">security</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">master_key</span><span class="token punctuation">:</span> <span class="token string">"your-master-key-here"</span></span>
<span class="line">  <span class="token key atrule">jwt_secret</span><span class="token punctuation">:</span> <span class="token string">"your-jwt-secret-here"</span></span>
<span class="line">  <span class="token key atrule">access_key_rotation_interval</span><span class="token punctuation">:</span> <span class="token string">"24h"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ—¥å¿—é…ç½®</span></span>
<span class="line"><span class="token key atrule">log</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">level</span><span class="token punctuation">:</span> <span class="token string">"info"</span></span>
<span class="line">  <span class="token key atrule">format</span><span class="token punctuation">:</span> <span class="token string">"json"</span></span>
<span class="line">  <span class="token key atrule">output</span><span class="token punctuation">:</span> <span class="token string">"stdout"</span></span>
<span class="line">  <span class="token key atrule">file_path</span><span class="token punctuation">:</span> <span class="token string">"./logs/iam.log"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç›‘æ§é…ç½®</span></span>
<span class="line"><span class="token key atrule">metrics</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token string">"9090"</span></span>
<span class="line">  <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">"/metrics"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é“¾è·¯è¿½è¸ªé…ç½®</span></span>
<span class="line"><span class="token key atrule">tracing</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">jaeger_endpoint</span><span class="token punctuation">:</span> <span class="token string">"http://localhost:14268/api/traces"</span></span>
<span class="line">  <span class="token key atrule">service_name</span><span class="token punctuation">:</span> <span class="token string">"vgo-iam"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é”™è¯¯ç›‘æ§é…ç½®</span></span>
<span class="line"><span class="token key atrule">sentry</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">dsn</span><span class="token punctuation">:</span> <span class="token string">"https://your-sentry-dsn@sentry.io/project-id"</span></span>
<span class="line">  <span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token string">"production"</span></span>
<span class="line">  <span class="token key atrule">debug</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ–¥ï¸-æœåŠ¡é…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸ–¥ï¸-æœåŠ¡é…ç½®">#</a> ğŸ–¥ï¸ æœåŠ¡é…ç½®</h2>
<h3 id="åŸºæœ¬æœåŠ¡è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æœåŠ¡è®¾ç½®">#</a> åŸºæœ¬æœåŠ¡è®¾ç½®</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># gRPCæœåŠ¡ç«¯å£</span></span>
<span class="line">  <span class="token key atrule">grpc_port</span><span class="token punctuation">:</span> <span class="token string">"50051"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># HTTPè°ƒè¯•ç•Œé¢ç«¯å£</span></span>
<span class="line">  <span class="token key atrule">http_port</span><span class="token punctuation">:</span> <span class="token string">"8080"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è°ƒè¯•æ¨¡å¼ï¼ˆå¼€å‘ç¯å¢ƒå»ºè®®å¼€å¯ï¼‰</span></span>
<span class="line">  <span class="token key atrule">debug_mode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æœåŠ¡ç»‘å®šåœ°å€</span></span>
<span class="line">  <span class="token key atrule">bind_addr</span><span class="token punctuation">:</span> <span class="token string">"0.0.0.0"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ä¼˜é›…å…³é—­è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">shutdown_timeout</span><span class="token punctuation">:</span> <span class="token string">"30s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¯»å–è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">read_timeout</span><span class="token punctuation">:</span> <span class="token string">"10s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># å†™å…¥è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">write_timeout</span><span class="token punctuation">:</span> <span class="token string">"10s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ç©ºé—²è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">idle_timeout</span><span class="token punctuation">:</span> <span class="token string">"60s"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="grpcé…ç½®" tabindex="-1"><a class="header-anchor" href="#grpcé…ç½®">#</a> gRPCé…ç½®</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">grpc</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># æœ€å¤§æ¥æ”¶æ¶ˆæ¯å¤§å°ï¼ˆå­—èŠ‚ï¼‰</span></span>
<span class="line">  <span class="token key atrule">max_recv_msg_size</span><span class="token punctuation">:</span> <span class="token number">4194304</span>  <span class="token comment"># 4MB</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æœ€å¤§å‘é€æ¶ˆæ¯å¤§å°ï¼ˆå­—èŠ‚ï¼‰</span></span>
<span class="line">  <span class="token key atrule">max_send_msg_size</span><span class="token punctuation">:</span> <span class="token number">4194304</span>  <span class="token comment"># 4MB</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¿æ¥è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">connection_timeout</span><span class="token punctuation">:</span> <span class="token string">"5s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ä¿æŒè¿æ¥è®¾ç½®</span></span>
<span class="line">  <span class="token key atrule">keepalive</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">time</span><span class="token punctuation">:</span> <span class="token string">"30s"</span></span>
<span class="line">    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token string">"5s"</span></span>
<span class="line">    <span class="token key atrule">permit_without_stream</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ—„ï¸-æ•°æ®åº“é…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸ—„ï¸-æ•°æ®åº“é…ç½®">#</a> ğŸ—„ï¸ æ•°æ®åº“é…ç½®</h2>
<h3 id="postgresqlé…ç½®" tabindex="-1"><a class="header-anchor" href="#postgresqlé…ç½®">#</a> PostgreSQLé…ç½®</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">database</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²</span></span>
<span class="line">  <span class="token key atrule">dsn</span><span class="token punctuation">:</span> <span class="token string">"postgres://username:password@hostname:port/database?sslmode=disable"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æœ€å¤§æ‰“å¼€è¿æ¥æ•°</span></span>
<span class="line">  <span class="token key atrule">max_open_conns</span><span class="token punctuation">:</span> <span class="token number">25</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æœ€å¤§ç©ºé—²è¿æ¥æ•°</span></span>
<span class="line">  <span class="token key atrule">max_idle_conns</span><span class="token punctuation">:</span> <span class="token number">5</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¿æ¥æœ€å¤§ç”Ÿå­˜æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">conn_max_lifetime</span><span class="token punctuation">:</span> <span class="token string">"1h"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¿æ¥æœ€å¤§ç©ºé—²æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">conn_max_idle_time</span><span class="token punctuation">:</span> <span class="token string">"30m"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ•°æ®åº“è¿ç§»è®¾ç½®</span></span>
<span class="line">  <span class="token key atrule">migration</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">"./migrations"</span></span>
<span class="line">    </span>
<span class="line">  <span class="token comment"># æ…¢æŸ¥è¯¢æ—¥å¿—é˜ˆå€¼</span></span>
<span class="line">  <span class="token key atrule">slow_query_threshold</span><span class="token punctuation">:</span> <span class="token string">"1s"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è¿æ¥æ± ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#è¿æ¥æ± ä¼˜åŒ–">#</a> è¿æ¥æ± ä¼˜åŒ–</h3>
<p>æ ¹æ®ä¸åŒç¯å¢ƒè°ƒæ•´è¿æ¥æ± å‚æ•°ï¼š</p>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token comment"># å¼€å‘ç¯å¢ƒ</span></span>
<span class="line"><span class="token key atrule">database</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">max_open_conns</span><span class="token punctuation">:</span> <span class="token number">10</span></span>
<span class="line">  <span class="token key atrule">max_idle_conns</span><span class="token punctuation">:</span> <span class="token number">2</span></span>
<span class="line">  <span class="token key atrule">conn_max_lifetime</span><span class="token punctuation">:</span> <span class="token string">"30m"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æµ‹è¯•ç¯å¢ƒ</span></span>
<span class="line"><span class="token key atrule">database</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">max_open_conns</span><span class="token punctuation">:</span> <span class="token number">20</span></span>
<span class="line">  <span class="token key atrule">max_idle_conns</span><span class="token punctuation">:</span> <span class="token number">5</span></span>
<span class="line">  <span class="token key atrule">conn_max_lifetime</span><span class="token punctuation">:</span> <span class="token string">"1h"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç”Ÿäº§ç¯å¢ƒ</span></span>
<span class="line"><span class="token key atrule">database</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">max_open_conns</span><span class="token punctuation">:</span> <span class="token number">50</span></span>
<span class="line">  <span class="token key atrule">max_idle_conns</span><span class="token punctuation">:</span> <span class="token number">10</span></span>
<span class="line">  <span class="token key atrule">conn_max_lifetime</span><span class="token punctuation">:</span> <span class="token string">"2h"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸš€-ç¼“å­˜é…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸš€-ç¼“å­˜é…ç½®">#</a> ğŸš€ ç¼“å­˜é…ç½®</h2>
<h3 id="redisé…ç½®" tabindex="-1"><a class="header-anchor" href="#redisé…ç½®">#</a> Redisé…ç½®</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">redis</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># RedisæœåŠ¡å™¨åœ°å€</span></span>
<span class="line">  <span class="token key atrule">addr</span><span class="token punctuation">:</span> <span class="token string">"localhost:6379"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è®¤è¯å¯†ç </span></span>
<span class="line">  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">""</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ•°æ®åº“ç¼–å·</span></span>
<span class="line">  <span class="token key atrule">db</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¿æ¥æ± å¤§å°</span></span>
<span class="line">  <span class="token key atrule">pool_size</span><span class="token punctuation">:</span> <span class="token number">10</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æœ€å°ç©ºé—²è¿æ¥æ•°</span></span>
<span class="line">  <span class="token key atrule">min_idle_conns</span><span class="token punctuation">:</span> <span class="token number">5</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¿æ¥è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">dial_timeout</span><span class="token punctuation">:</span> <span class="token string">"5s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¯»å–è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">read_timeout</span><span class="token punctuation">:</span> <span class="token string">"3s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># å†™å…¥è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">write_timeout</span><span class="token punctuation">:</span> <span class="token string">"3s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¿æ¥æ± è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">pool_timeout</span><span class="token punctuation">:</span> <span class="token string">"4s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ç©ºé—²è¿æ¥æ£€æŸ¥é¢‘ç‡</span></span>
<span class="line">  <span class="token key atrule">idle_check_frequency</span><span class="token punctuation">:</span> <span class="token string">"60s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æœ€å¤§è¿æ¥å¹´é¾„</span></span>
<span class="line">  <span class="token key atrule">max_conn_age</span><span class="token punctuation">:</span> <span class="token string">"30m"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ç©ºé—²è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">idle_timeout</span><span class="token punctuation">:</span> <span class="token string">"5m"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼“å­˜ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜ç­–ç•¥">#</a> ç¼“å­˜ç­–ç•¥</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">cache</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># ç”¨æˆ·ä¿¡æ¯ç¼“å­˜æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">user_cache_ttl</span><span class="token punctuation">:</span> <span class="token string">"15m"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ç­–ç•¥ç¼“å­˜æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">policy_cache_ttl</span><span class="token punctuation">:</span> <span class="token string">"30m"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è®¿é—®å¯†é’¥ç¼“å­˜æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">access_key_cache_ttl</span><span class="token punctuation">:</span> <span class="token string">"10m"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æƒé™æ£€æŸ¥ç¼“å­˜æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">permission_cache_ttl</span><span class="token punctuation">:</span> <span class="token string">"5m"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”’-å®‰å…¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸ”’-å®‰å…¨é…ç½®">#</a> ğŸ”’ å®‰å…¨é…ç½®</h2>
<h3 id="å¯†é’¥ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#å¯†é’¥ç®¡ç†">#</a> å¯†é’¥ç®¡ç†</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">security</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># ä¸»å¯†é’¥ï¼ˆç”¨äºåŠ å¯†è®¿é—®å¯†é’¥ï¼‰</span></span>
<span class="line">  <span class="token key atrule">master_key</span><span class="token punctuation">:</span> <span class="token string">"your-32-character-master-key-here"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># JWTå¯†é’¥</span></span>
<span class="line">  <span class="token key atrule">jwt_secret</span><span class="token punctuation">:</span> <span class="token string">"your-jwt-secret-key-here"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è®¿é—®å¯†é’¥è½®æ¢é—´éš”</span></span>
<span class="line">  <span class="token key atrule">access_key_rotation_interval</span><span class="token punctuation">:</span> <span class="token string">"24h"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># å¯†ç å“ˆå¸Œæˆæœ¬ï¼ˆbcryptï¼‰</span></span>
<span class="line">  <span class="token key atrule">password_hash_cost</span><span class="token punctuation">:</span> <span class="token number">12</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># JWTè¿‡æœŸæ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">jwt_expiration</span><span class="token punctuation">:</span> <span class="token string">"24h"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># åˆ·æ–°ä»¤ç‰Œè¿‡æœŸæ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">refresh_token_expiration</span><span class="token punctuation">:</span> <span class="token string">"168h"</span>  <span class="token comment"># 7å¤©</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="tlsé…ç½®" tabindex="-1"><a class="header-anchor" href="#tlsé…ç½®">#</a> TLSé…ç½®</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">tls</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># å¯ç”¨TLS</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¯ä¹¦æ–‡ä»¶è·¯å¾„</span></span>
<span class="line">  <span class="token key atrule">cert_file</span><span class="token punctuation">:</span> <span class="token string">"/path/to/cert.pem"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ç§é’¥æ–‡ä»¶è·¯å¾„</span></span>
<span class="line">  <span class="token key atrule">key_file</span><span class="token punctuation">:</span> <span class="token string">"/path/to/key.pem"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># CAè¯ä¹¦æ–‡ä»¶è·¯å¾„</span></span>
<span class="line">  <span class="token key atrule">ca_file</span><span class="token punctuation">:</span> <span class="token string">"/path/to/ca.pem"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># å®¢æˆ·ç«¯è®¤è¯æ¨¡å¼</span></span>
<span class="line">  <span class="token key atrule">client_auth</span><span class="token punctuation">:</span> <span class="token string">"require_and_verify"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é€Ÿç‡é™åˆ¶" tabindex="-1"><a class="header-anchor" href="#é€Ÿç‡é™åˆ¶">#</a> é€Ÿç‡é™åˆ¶</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">rate_limit</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># å¯ç”¨é€Ÿç‡é™åˆ¶</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ¯ç§’è¯·æ±‚æ•°é™åˆ¶</span></span>
<span class="line">  <span class="token key atrule">requests_per_second</span><span class="token punctuation">:</span> <span class="token number">100</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># çªå‘è¯·æ±‚æ•°</span></span>
<span class="line">  <span class="token key atrule">burst</span><span class="token punctuation">:</span> <span class="token number">200</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># é™åˆ¶çª—å£å¤§å°</span></span>
<span class="line">  <span class="token key atrule">window</span><span class="token punctuation">:</span> <span class="token string">"1m"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“Š-æ—¥å¿—é…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸ“Š-æ—¥å¿—é…ç½®">#</a> ğŸ“Š æ—¥å¿—é…ç½®</h2>
<h3 id="åŸºæœ¬æ—¥å¿—è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ—¥å¿—è®¾ç½®">#</a> åŸºæœ¬æ—¥å¿—è®¾ç½®</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">log</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># æ—¥å¿—çº§åˆ«ï¼šdebug, info, warn, error</span></span>
<span class="line">  <span class="token key atrule">level</span><span class="token punctuation">:</span> <span class="token string">"info"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ—¥å¿—æ ¼å¼ï¼šjson, text</span></span>
<span class="line">  <span class="token key atrule">format</span><span class="token punctuation">:</span> <span class="token string">"json"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¾“å‡ºç›®æ ‡ï¼šstdout, stderr, file</span></span>
<span class="line">  <span class="token key atrule">output</span><span class="token punctuation">:</span> <span class="token string">"stdout"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆå½“outputä¸ºfileæ—¶ï¼‰</span></span>
<span class="line">  <span class="token key atrule">file_path</span><span class="token punctuation">:</span> <span class="token string">"./logs/iam.log"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰</span></span>
<span class="line">  <span class="token key atrule">max_size</span><span class="token punctuation">:</span> <span class="token number">100</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶æ•°é‡</span></span>
<span class="line">  <span class="token key atrule">max_backups</span><span class="token punctuation">:</span> <span class="token number">10</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°</span></span>
<span class="line">  <span class="token key atrule">max_age</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ˜¯å¦å‹ç¼©æ—§æ—¥å¿—æ–‡ä»¶</span></span>
<span class="line">  <span class="token key atrule">compress</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»“æ„åŒ–æ—¥å¿—å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#ç»“æ„åŒ–æ—¥å¿—å­—æ®µ">#</a> ç»“æ„åŒ–æ—¥å¿—å­—æ®µ</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">log</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># è‡ªå®šä¹‰å­—æ®µ</span></span>
<span class="line">  <span class="token key atrule">fields</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">service</span><span class="token punctuation">:</span> <span class="token string">"vgo-iam"</span></span>
<span class="line">    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"1.2.0"</span></span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token string">"production"</span></span>
<span class="line">    </span>
<span class="line">  <span class="token comment"># æ•æ„Ÿå­—æ®µè¿‡æ»¤</span></span>
<span class="line">  <span class="token key atrule">sensitive_fields</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"password"</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"secret"</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"token"</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"key"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“ˆ-ç›‘æ§é…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸ“ˆ-ç›‘æ§é…ç½®">#</a> ğŸ“ˆ ç›‘æ§é…ç½®</h2>
<h3 id="prometheusæŒ‡æ ‡" tabindex="-1"><a class="header-anchor" href="#prometheusæŒ‡æ ‡">#</a> PrometheusæŒ‡æ ‡</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">metrics</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># å¯ç”¨æŒ‡æ ‡æ”¶é›†</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æŒ‡æ ‡æœåŠ¡ç«¯å£</span></span>
<span class="line">  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token string">"9090"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æŒ‡æ ‡è·¯å¾„</span></span>
<span class="line">  <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">"/metrics"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æŒ‡æ ‡æ”¶é›†é—´éš”</span></span>
<span class="line">  <span class="token key atrule">interval</span><span class="token punctuation">:</span> <span class="token string">"15s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è‡ªå®šä¹‰æ ‡ç­¾</span></span>
<span class="line">  <span class="token key atrule">labels</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">service</span><span class="token punctuation">:</span> <span class="token string">"vgo-iam"</span></span>
<span class="line">    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"1.2.0"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¥åº·æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#å¥åº·æ£€æŸ¥">#</a> å¥åº·æ£€æŸ¥</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">health</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># å¥åº·æ£€æŸ¥ç«¯ç‚¹</span></span>
<span class="line">  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> <span class="token string">"/health"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ£€æŸ¥é—´éš”</span></span>
<span class="line">  <span class="token key atrule">interval</span><span class="token punctuation">:</span> <span class="token string">"30s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è¶…æ—¶æ—¶é—´</span></span>
<span class="line">  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token string">"5s"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ£€æŸ¥é¡¹ç›®</span></span>
<span class="line">  <span class="token key atrule">checks</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"database"</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"redis"</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"external_api"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”-é“¾è·¯è¿½è¸ªé…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸ”-é“¾è·¯è¿½è¸ªé…ç½®">#</a> ğŸ” é“¾è·¯è¿½è¸ªé…ç½®</h2>
<h3 id="jaegeré…ç½®" tabindex="-1"><a class="header-anchor" href="#jaegeré…ç½®">#</a> Jaegeré…ç½®</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">tracing</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># å¯ç”¨é“¾è·¯è¿½è¸ª</span></span>
<span class="line">  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># Jaegerç«¯ç‚¹</span></span>
<span class="line">  <span class="token key atrule">jaeger_endpoint</span><span class="token punctuation">:</span> <span class="token string">"http://localhost:14268/api/traces"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æœåŠ¡åç§°</span></span>
<span class="line">  <span class="token key atrule">service_name</span><span class="token punctuation">:</span> <span class="token string">"vgo-iam"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># é‡‡æ ·ç‡ï¼ˆ0.0-1.0ï¼‰</span></span>
<span class="line">  <span class="token key atrule">sampling_rate</span><span class="token punctuation">:</span> <span class="token number">0.1</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># æ ‡ç­¾</span></span>
<span class="line">  <span class="token key atrule">tags</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"1.2.0"</span></span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token string">"production"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸš¨-é”™è¯¯ç›‘æ§é…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸš¨-é”™è¯¯ç›‘æ§é…ç½®">#</a> ğŸš¨ é”™è¯¯ç›‘æ§é…ç½®</h2>
<h3 id="sentryé…ç½®" tabindex="-1"><a class="header-anchor" href="#sentryé…ç½®">#</a> Sentryé…ç½®</h3>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token key atrule">sentry</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token comment"># Sentry DSN</span></span>
<span class="line">  <span class="token key atrule">dsn</span><span class="token punctuation">:</span> <span class="token string">"https://your-sentry-dsn@sentry.io/project-id"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># ç¯å¢ƒæ ‡è¯†</span></span>
<span class="line">  <span class="token key atrule">environment</span><span class="token punctuation">:</span> <span class="token string">"production"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># è°ƒè¯•æ¨¡å¼</span></span>
<span class="line">  <span class="token key atrule">debug</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># é‡‡æ ·ç‡</span></span>
<span class="line">  <span class="token key atrule">sample_rate</span><span class="token punctuation">:</span> <span class="token number">1.0</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># å‘å¸ƒç‰ˆæœ¬</span></span>
<span class="line">  <span class="token key atrule">release</span><span class="token punctuation">:</span> <span class="token string">"vgo-iam@1.2.0"</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment"># å¿½ç•¥çš„é”™è¯¯</span></span>
<span class="line">  <span class="token key atrule">ignore_errors</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"context canceled"</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token string">"connection reset by peer"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸŒ-ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#ğŸŒ-ç¯å¢ƒå˜é‡">#</a> ğŸŒ ç¯å¢ƒå˜é‡</h2>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡è¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®ï¼š</p>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># æ•°æ®åº“é…ç½®</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_DATABASE_DSN</span><span class="token operator">=</span><span class="token string">"postgres://user:pass@localhost/db"</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_DATABASE_MAX_OPEN_CONNS</span><span class="token operator">=</span><span class="token number">50</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æœåŠ¡é…ç½®</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_SERVER_GRPC_PORT</span><span class="token operator">=</span><span class="token number">50051</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_SERVER_HTTP_PORT</span><span class="token operator">=</span><span class="token number">8080</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_SERVER_DEBUG_MODE</span><span class="token operator">=</span>true</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®‰å…¨é…ç½®</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_SECURITY_MASTER_KEY</span><span class="token operator">=</span><span class="token string">"your-master-key"</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_SECURITY_JWT_SECRET</span><span class="token operator">=</span><span class="token string">"your-jwt-secret"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Redisé…ç½®</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_REDIS_ADDR</span><span class="token operator">=</span><span class="token string">"localhost:6379"</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_REDIS_PASSWORD</span><span class="token operator">=</span><span class="token string">"redis-password"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ—¥å¿—é…ç½®</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_LOG_LEVEL</span><span class="token operator">=</span>debug</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VGO_LOG_FORMAT</span><span class="token operator">=</span>json</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“‹-é…ç½®éªŒè¯" tabindex="-1"><a class="header-anchor" href="#ğŸ“‹-é…ç½®éªŒè¯">#</a> ğŸ“‹ é…ç½®éªŒè¯</h2>
<h3 id="éªŒè¯é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#éªŒè¯é…ç½®æ–‡ä»¶">#</a> éªŒè¯é…ç½®æ–‡ä»¶</h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•</span></span>
<span class="line">iam-service config validate <span class="token parameter variable">--config</span> config/config.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ˜¾ç¤ºå½“å‰é…ç½®</span></span>
<span class="line">iam-service config show <span class="token parameter variable">--config</span> config/config.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æµ‹è¯•æ•°æ®åº“è¿æ¥</span></span>
<span class="line">iam-service config test-db <span class="token parameter variable">--config</span> config/config.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æµ‹è¯•Redisè¿æ¥</span></span>
<span class="line">iam-service config test-redis <span class="token parameter variable">--config</span> config/config.yaml</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é…ç½®æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ¨¡æ¿">#</a> é…ç½®æ¨¡æ¿</h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># ç”Ÿæˆé…ç½®æ¨¡æ¿</span></span>
<span class="line">iam-service config template <span class="token operator">></span> config/config.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç”Ÿæˆå¼€å‘ç¯å¢ƒé…ç½®</span></span>
<span class="line">iam-service config template <span class="token parameter variable">--env</span> dev <span class="token operator">></span> config/config-dev.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç”Ÿæˆç”Ÿäº§ç¯å¢ƒé…ç½®</span></span>
<span class="line">iam-service config template <span class="token parameter variable">--env</span> prod <span class="token operator">></span> config/config-prod.yaml</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”§-æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-æœ€ä½³å®è·µ">#</a> ğŸ”§ æœ€ä½³å®è·µ</h2>
<h3 id="_1-å®‰å…¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-å®‰å…¨é…ç½®">#</a> 1. å®‰å…¨é…ç½®</h3>
<ul>
<li>ä½¿ç”¨å¼ºå¯†ç å’Œéšæœºå¯†é’¥</li>
<li>å®šæœŸè½®æ¢å¯†é’¥</li>
<li>å¯ç”¨TLSåŠ å¯†</li>
<li>é…ç½®é€‚å½“çš„é€Ÿç‡é™åˆ¶</li>
</ul>
<h3 id="_2-æ€§èƒ½ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_2-æ€§èƒ½ä¼˜åŒ–">#</a> 2. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>æ ¹æ®è´Ÿè½½è°ƒæ•´è¿æ¥æ± å¤§å°</li>
<li>åˆç†è®¾ç½®ç¼“å­˜TTL</li>
<li>å¯ç”¨gRPCè¿æ¥å¤ç”¨</li>
<li>ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢</li>
</ul>
<h3 id="_3-ç›‘æ§é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-ç›‘æ§é…ç½®">#</a> 3. ç›‘æ§é…ç½®</h3>
<ul>
<li>å¯ç”¨æ‰€æœ‰ç›‘æ§ç»„ä»¶</li>
<li>è®¾ç½®åˆé€‚çš„é‡‡æ ·ç‡</li>
<li>é…ç½®å‘Šè­¦è§„åˆ™</li>
<li>å®šæœŸæ£€æŸ¥æ—¥å¿—</li>
</ul>
<h3 id="_4-ç¯å¢ƒéš”ç¦»" tabindex="-1"><a class="header-anchor" href="#_4-ç¯å¢ƒéš”ç¦»">#</a> 4. ç¯å¢ƒéš”ç¦»</h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># å¼€å‘ç¯å¢ƒ</span></span>
<span class="line"><span class="token function">cp</span> config/config-dev.yaml config/config.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æµ‹è¯•ç¯å¢ƒ</span></span>
<span class="line"><span class="token function">cp</span> config/config-test.yaml config/config.yaml</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç”Ÿäº§ç¯å¢ƒ</span></span>
<span class="line"><span class="token function">cp</span> config/config-prod.yaml config/config.yaml</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“š-ç›¸å…³æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-ç›¸å…³æ–‡æ¡£">#</a> ğŸ“š ç›¸å…³æ–‡æ¡£</h2>
<ul>
<li><RouteLink to="/guide/installation.html">å®‰è£…æŒ‡å—</RouteLink></li>
<li><RouteLink to="/guide/basic-usage.html">åŸºæœ¬ä½¿ç”¨</RouteLink></li>
<li><a href="/api/" target="_blank" rel="noopener noreferrer">APIæ–‡æ¡£</a></li>
<li><a href="/deployment/" target="_blank" rel="noopener noreferrer">éƒ¨ç½²æŒ‡å—</a></li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>é…ç½®æ–‡ä»¶æ”¯æŒçƒ­é‡è½½ï¼Œä¿®æ”¹é…ç½®åå‘é€SIGHUPä¿¡å·å³å¯é‡æ–°åŠ è½½é…ç½®ã€‚</p>
</div>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·ç¡®ä¿é…ç½®æ–‡ä»¶çš„æƒé™è®¾ç½®æ­£ç¡®ï¼Œé¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</p>
</div>
</div></template>


