<template><div><h1 id="å¼€å‘æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#å¼€å‘æŒ‡å—">#</a> å¼€å‘æŒ‡å—</h1>
<p>æ¬¢è¿æ¥åˆ°VGOå¾®æœåŠ¡å¼€å‘æŒ‡å—ï¼æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨äº†è§£å¦‚ä½•å‚ä¸VGOå¾®æœåŠ¡çš„å¼€å‘ï¼ŒåŒ…æ‹¬ç¯å¢ƒæ­å»ºã€ä»£ç è§„èŒƒã€æµ‹è¯•æµç¨‹ã€è°ƒè¯•æŠ€å·§ç­‰å†…å®¹ã€‚</p>
<h2 id="ğŸ“‹-å¼€å‘æ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ“‹-å¼€å‘æ¦‚è§ˆ">#</a> ğŸ“‹ å¼€å‘æ¦‚è§ˆ</h2>
<h3 id="æŠ€æœ¯æ ˆ" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯æ ˆ">#</a> æŠ€æœ¯æ ˆ</h3>
<table>
<thead>
<tr>
<th>ç»„ä»¶</th>
<th>æŠ€æœ¯</th>
<th>ç‰ˆæœ¬</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>åç«¯è¯­è¨€</td>
<td>Go</td>
<td>1.21+</td>
<td>ä¸»è¦å¼€å‘è¯­è¨€</td>
</tr>
<tr>
<td>RPCæ¡†æ¶</td>
<td>gRPC</td>
<td>v1.58+</td>
<td>æœåŠ¡é—´é€šä¿¡</td>
</tr>
<tr>
<td>æ•°æ®åº“</td>
<td>PostgreSQL</td>
<td>15+</td>
<td>ä¸»æ•°æ®åº“</td>
</tr>
<tr>
<td>ç¼“å­˜</td>
<td>Redis</td>
<td>7+</td>
<td>ç¼“å­˜å’Œä¼šè¯å­˜å‚¨</td>
</tr>
<tr>
<td>æ¶ˆæ¯é˜Ÿåˆ—</td>
<td>NATS</td>
<td>2.9+</td>
<td>å¼‚æ­¥æ¶ˆæ¯å¤„ç†</td>
</tr>
<tr>
<td>ç›‘æ§</td>
<td>Prometheus</td>
<td>2.45+</td>
<td>æŒ‡æ ‡æ”¶é›†</td>
</tr>
<tr>
<td>æ—¥å¿—</td>
<td>Zap</td>
<td>1.25+</td>
<td>ç»“æ„åŒ–æ—¥å¿—</td>
</tr>
<tr>
<td>æµ‹è¯•</td>
<td>Testify</td>
<td>1.8+</td>
<td>å•å…ƒæµ‹è¯•æ¡†æ¶</td>
</tr>
<tr>
<td>æ„å»ºå·¥å…·</td>
<td>Make</td>
<td>-</td>
<td>æ„å»ºè‡ªåŠ¨åŒ–</td>
</tr>
<tr>
<td>å®¹å™¨åŒ–</td>
<td>Docker</td>
<td>24+</td>
<td>å®¹å™¨åŒ–éƒ¨ç½²</td>
</tr>
</tbody>
</table>
<h3 id="é¡¹ç›®æ¶æ„" tabindex="-1"><a class="header-anchor" href="#é¡¹ç›®æ¶æ„">#</a> é¡¹ç›®æ¶æ„</h3>
<div class="language-mermaid line-numbers-mode" data-highlighter="prismjs" data-ext="mermaid"><pre v-pre><code class="language-mermaid"><span class="line"><span class="token keyword">graph</span> TB</span>
<span class="line">    <span class="token keyword">subgraph</span> <span class="token string">"å®¢æˆ·ç«¯å±‚"</span></span>
<span class="line">        A<span class="token text string">[gRPCå®¢æˆ·ç«¯]</span></span>
<span class="line">        B<span class="token text string">[HTTPå®¢æˆ·ç«¯]</span></span>
<span class="line">        C<span class="token text string">[SDK]</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">subgraph</span> <span class="token string">"ç½‘å…³å±‚"</span></span>
<span class="line">        D<span class="token text string">[APIç½‘å…³]</span></span>
<span class="line">        E<span class="token text string">[è´Ÿè½½å‡è¡¡å™¨]</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">subgraph</span> <span class="token string">"æœåŠ¡å±‚"</span></span>
<span class="line">        F<span class="token text string">[ç”¨æˆ·ç®¡ç†æœåŠ¡]</span></span>
<span class="line">        G<span class="token text string">[ç­–ç•¥ç®¡ç†æœåŠ¡]</span></span>
<span class="line">        H<span class="token text string">[æƒé™éªŒè¯æœåŠ¡]</span></span>
<span class="line">        I<span class="token text string">[è®¿é—®å¯†é’¥æœåŠ¡]</span></span>
<span class="line">        J<span class="token text string">[åº”ç”¨ç®¡ç†æœåŠ¡]</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">subgraph</span> <span class="token string">"æ•°æ®å±‚"</span></span>
<span class="line">        K<span class="token text string">[PostgreSQL]</span></span>
<span class="line">        L<span class="token text string">[Redis]</span></span>
<span class="line">        M<span class="token text string">[NATS]</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">subgraph</span> <span class="token string">"ç›‘æ§å±‚"</span></span>
<span class="line">        N<span class="token text string">[Prometheus]</span></span>
<span class="line">        O<span class="token text string">[Grafana]</span></span>
<span class="line">        P<span class="token text string">[Jaeger]</span></span>
<span class="line">    <span class="token keyword">end</span></span>
<span class="line">    </span>
<span class="line">    A <span class="token arrow operator">--></span> D</span>
<span class="line">    B <span class="token arrow operator">--></span> D</span>
<span class="line">    C <span class="token arrow operator">--></span> D</span>
<span class="line">    D <span class="token arrow operator">--></span> E</span>
<span class="line">    E <span class="token arrow operator">--></span> F</span>
<span class="line">    E <span class="token arrow operator">--></span> G</span>
<span class="line">    E <span class="token arrow operator">--></span> H</span>
<span class="line">    E <span class="token arrow operator">--></span> I</span>
<span class="line">    E <span class="token arrow operator">--></span> J</span>
<span class="line">    F <span class="token arrow operator">--></span> K</span>
<span class="line">    G <span class="token arrow operator">--></span> K</span>
<span class="line">    H <span class="token arrow operator">--></span> L</span>
<span class="line">    I <span class="token arrow operator">--></span> K</span>
<span class="line">    J <span class="token arrow operator">--></span> K</span>
<span class="line">    F <span class="token arrow operator">--></span> M</span>
<span class="line">    G <span class="token arrow operator">--></span> M</span>
<span class="line">    H <span class="token arrow operator">--></span> M</span>
<span class="line">    F <span class="token arrow operator">--></span> N</span>
<span class="line">    G <span class="token arrow operator">--></span> N</span>
<span class="line">    H <span class="token arrow operator">--></span> N</span>
<span class="line">    N <span class="token arrow operator">--></span> O</span>
<span class="line">    F <span class="token arrow operator">--></span> P</span>
<span class="line">    G <span class="token arrow operator">--></span> P</span>
<span class="line">    H <span class="token arrow operator">--></span> P</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç›®å½•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ç›®å½•ç»“æ„">#</a> ç›®å½•ç»“æ„</h3>
<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre v-pre><code class="language-text"><span class="line">vgo_micro_service/</span>
<span class="line">â”œâ”€â”€ api/                    # APIå®šä¹‰</span>
<span class="line">â”‚   â”œâ”€â”€ proto/             # Protocol Bufferså®šä¹‰</span>
<span class="line">â”‚   â””â”€â”€ openapi/           # OpenAPIè§„èŒƒ</span>
<span class="line">â”œâ”€â”€ cmd/                   # åº”ç”¨ç¨‹åºå…¥å£</span>
<span class="line">â”‚   â”œâ”€â”€ server/           # æœåŠ¡å™¨å¯åŠ¨ä»£ç </span>
<span class="line">â”‚   â””â”€â”€ client/           # å®¢æˆ·ç«¯å·¥å…·</span>
<span class="line">â”œâ”€â”€ internal/              # å†…éƒ¨ä»£ç </span>
<span class="line">â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†</span>
<span class="line">â”‚   â”œâ”€â”€ server/           # æœåŠ¡å™¨å®ç°</span>
<span class="line">â”‚   â”œâ”€â”€ service/          # ä¸šåŠ¡é€»è¾‘</span>
<span class="line">â”‚   â”œâ”€â”€ repository/       # æ•°æ®è®¿é—®å±‚</span>
<span class="line">â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶</span>
<span class="line">â”‚   â”œâ”€â”€ auth/             # è®¤è¯æˆæƒ</span>
<span class="line">â”‚   â”œâ”€â”€ crypto/           # åŠ å¯†è§£å¯†</span>
<span class="line">â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°</span>
<span class="line">â”œâ”€â”€ pkg/                   # å…¬å…±åº“</span>
<span class="line">â”‚   â”œâ”€â”€ client/           # å®¢æˆ·ç«¯SDK</span>
<span class="line">â”‚   â”œâ”€â”€ errors/           # é”™è¯¯å®šä¹‰</span>
<span class="line">â”‚   â””â”€â”€ logger/           # æ—¥å¿—å·¥å…·</span>
<span class="line">â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶</span>
<span class="line">â”‚   â”œâ”€â”€ build.sh          # æ„å»ºè„šæœ¬</span>
<span class="line">â”‚   â”œâ”€â”€ test.sh           # æµ‹è¯•è„šæœ¬</span>
<span class="line">â”‚   â””â”€â”€ deploy.sh         # éƒ¨ç½²è„šæœ¬</span>
<span class="line">â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶</span>
<span class="line">â”œâ”€â”€ deployments/           # éƒ¨ç½²é…ç½®</span>
<span class="line">â”œâ”€â”€ docs/                  # æ–‡æ¡£</span>
<span class="line">â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶</span>
<span class="line">â”œâ”€â”€ tools/                 # å¼€å‘å·¥å…·</span>
<span class="line">â”œâ”€â”€ go.mod                 # Goæ¨¡å—å®šä¹‰</span>
<span class="line">â”œâ”€â”€ go.sum                 # Goæ¨¡å—æ ¡éªŒ</span>
<span class="line">â”œâ”€â”€ Makefile              # æ„å»ºé…ç½®</span>
<span class="line">â”œâ”€â”€ Dockerfile            # Dockeré•œåƒ</span>
<span class="line">â””â”€â”€ docker-compose.yml    # Docker Composeé…ç½®</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸš€-å¿«é€Ÿå¼€å§‹" tabindex="-1"><a class="header-anchor" href="#ğŸš€-å¿«é€Ÿå¼€å§‹">#</a> ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
<h3 id="_1-ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-ç¯å¢ƒå‡†å¤‡">#</a> 1. ç¯å¢ƒå‡†å¤‡</h3>
<h4 id="å¿…éœ€è½¯ä»¶" tabindex="-1"><a class="header-anchor" href="#å¿…éœ€è½¯ä»¶">#</a> å¿…éœ€è½¯ä»¶</h4>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># å®‰è£…Goï¼ˆç‰ˆæœ¬1.21+ï¼‰</span></span>
<span class="line"><span class="token function">wget</span> https://go.dev/dl/go1.21.5.linux-amd64.tar.gz</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">tar</span> <span class="token parameter variable">-C</span> /usr/local <span class="token parameter variable">-xzf</span> go1.21.5.linux-amd64.tar.gz</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/usr/local/go/bin</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®‰è£…Protocol Buffersç¼–è¯‘å™¨</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> update</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> protobuf-compiler</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®‰è£…Goæ’ä»¶</span></span>
<span class="line">go <span class="token function">install</span> google.golang.org/protobuf/cmd/protoc-gen-go@latest</span>
<span class="line">go <span class="token function">install</span> google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®‰è£…å¼€å‘å·¥å…·</span></span>
<span class="line">go <span class="token function">install</span> github.com/golangci/golangci-lint/cmd/golangci-lint@latest</span>
<span class="line">go <span class="token function">install</span> github.com/swaggo/swag/cmd/swag@latest</span>
<span class="line">go <span class="token function">install</span> github.com/air-verse/air@latest</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ•°æ®åº“å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“å‡†å¤‡">#</a> æ•°æ®åº“å‡†å¤‡</h4>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># å¯åŠ¨PostgreSQLå’ŒRedis</span></span>
<span class="line"><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span> postgres redis</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç­‰å¾…æœåŠ¡å¯åŠ¨</span></span>
<span class="line"><span class="token function">sleep</span> <span class="token number">10</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¿è¡Œæ•°æ®åº“è¿ç§»</span></span>
<span class="line"><span class="token function">make</span> migrate-up</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å…‹éš†å’Œæ„å»º" tabindex="-1"><a class="header-anchor" href="#_2-å…‹éš†å’Œæ„å»º">#</a> 2. å…‹éš†å’Œæ„å»º</h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># å…‹éš†é¡¹ç›®</span></span>
<span class="line"><span class="token function">git</span> clone https://github.com/your-org/vgo_micro_service.git</span>
<span class="line"><span class="token builtin class-name">cd</span> vgo_micro_service</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®‰è£…ä¾èµ–</span></span>
<span class="line">go mod download</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç”Ÿæˆä»£ç </span></span>
<span class="line"><span class="token function">make</span> generate</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ„å»ºé¡¹ç›®</span></span>
<span class="line"><span class="token function">make</span> build</span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¿è¡Œæµ‹è¯•</span></span>
<span class="line"><span class="token function">make</span> <span class="token builtin class-name">test</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-å¯åŠ¨å¼€å‘æœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#_3-å¯åŠ¨å¼€å‘æœåŠ¡å™¨">#</a> 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨</h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­é‡è½½ï¼‰</span></span>
<span class="line"><span class="token function">make</span> dev</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æˆ–è€…ç›´æ¥è¿è¡Œ</span></span>
<span class="line">air</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-éªŒè¯å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_4-éªŒè¯å®‰è£…">#</a> 4. éªŒè¯å®‰è£…</h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€</span></span>
<span class="line"><span class="token function">curl</span> http://localhost:8081/health</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æµ‹è¯•gRPCæ¥å£</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> localhost:50051 grpc.health.v1.Health/Check</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ› ï¸-å¼€å‘å·¥ä½œæµ" tabindex="-1"><a class="header-anchor" href="#ğŸ› ï¸-å¼€å‘å·¥ä½œæµ">#</a> ğŸ› ï¸ å¼€å‘å·¥ä½œæµ</h2>
<h3 id="_1-åˆ†æ”¯ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_1-åˆ†æ”¯ç®¡ç†">#</a> 1. åˆ†æ”¯ç®¡ç†</h3>
<p>æˆ‘ä»¬ä½¿ç”¨Git Flowå·¥ä½œæµï¼š</p>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># åˆ›å»ºåŠŸèƒ½åˆ†æ”¯</span></span>
<span class="line"><span class="token function">git</span> checkout <span class="token parameter variable">-b</span> feature/user-management</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å¼€å‘å®Œæˆåæäº¤</span></span>
<span class="line"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span></span>
<span class="line"><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"feat: add user management API"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ¨é€åˆ°è¿œç¨‹</span></span>
<span class="line"><span class="token function">git</span> push origin feature/user-management</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»ºPull Request</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ä»£ç æäº¤è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç æäº¤è§„èŒƒ">#</a> 2. ä»£ç æäº¤è§„èŒƒ</h3>
<p>æˆ‘ä»¬ä½¿ç”¨<a href="https://www.conventionalcommits.org/" target="_blank" rel="noopener noreferrer">Conventional Commits</a>è§„èŒƒï¼š</p>
<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre v-pre><code class="language-text"><span class="line">&lt;type>[optional scope]: &lt;description></span>
<span class="line"></span>
<span class="line">[optional body]</span>
<span class="line"></span>
<span class="line">[optional footer(s)]</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç±»å‹è¯´æ˜ï¼š</strong></p>
<ul>
<li><code v-pre>feat</code>: æ–°åŠŸèƒ½</li>
<li><code v-pre>fix</code>: ä¿®å¤bug</li>
<li><code v-pre>docs</code>: æ–‡æ¡£æ›´æ–°</li>
<li><code v-pre>style</code>: ä»£ç æ ¼å¼åŒ–</li>
<li><code v-pre>refactor</code>: ä»£ç é‡æ„</li>
<li><code v-pre>test</code>: æµ‹è¯•ç›¸å…³</li>
<li><code v-pre>chore</code>: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre v-pre><code class="language-text"><span class="line">feat(auth): add JWT token validation</span>
<span class="line"></span>
<span class="line">Implement JWT token validation middleware with:</span>
<span class="line">- Token signature verification</span>
<span class="line">- Expiration time checking</span>
<span class="line">- User permission extraction</span>
<span class="line"></span>
<span class="line">Closes #123</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-ä»£ç å®¡æŸ¥" tabindex="-1"><a class="header-anchor" href="#_3-ä»£ç å®¡æŸ¥">#</a> 3. ä»£ç å®¡æŸ¥</h3>
<p>æ¯ä¸ªPull Requestéƒ½éœ€è¦ç»è¿‡ä»£ç å®¡æŸ¥ï¼š</p>
<ul>
<li>[ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ</li>
<li>[ ] åŒ…å«é€‚å½“çš„æµ‹è¯•</li>
<li>[ ] æ–‡æ¡£å·²æ›´æ–°</li>
<li>[ ] é€šè¿‡æ‰€æœ‰CIæ£€æŸ¥</li>
<li>[ ] è‡³å°‘ä¸€ä¸ªå›¢é˜Ÿæˆå‘˜å®¡æŸ¥é€šè¿‡</li>
</ul>
<h2 id="ğŸ“-ä»£ç è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#ğŸ“-ä»£ç è§„èŒƒ">#</a> ğŸ“ ä»£ç è§„èŒƒ</h2>
<h3 id="_1-goä»£ç è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_1-goä»£ç è§„èŒƒ">#</a> 1. Goä»£ç è§„èŒƒ</h3>
<p>æˆ‘ä»¬éµå¾ª<a href="https://github.com/golang/go/wiki/CodeReviewComments" target="_blank" rel="noopener noreferrer">Go Code Review Comments</a>å’Œ<a href="https://golang.org/doc/effective_go.html" target="_blank" rel="noopener noreferrer">Effective Go</a>ï¼š</p>
<h4 id="å‘½åè§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#å‘½åè§„èŒƒ">#</a> å‘½åè§„èŒƒ</h4>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token comment">// âœ… å¥½çš„å‘½å</span></span>
<span class="line"><span class="token keyword">type</span> UserService <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">    repo UserRepository</span>
<span class="line">    logger <span class="token operator">*</span>zap<span class="token punctuation">.</span>Logger</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>UserService<span class="token punctuation">)</span> <span class="token function">CreateUser</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>CreateUserRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// å®ç°é€»è¾‘</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// âŒ ä¸å¥½çš„å‘½å</span></span>
<span class="line"><span class="token keyword">type</span> usrSvc <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">    r UserRepository</span>
<span class="line">    l <span class="token operator">*</span>zap<span class="token punctuation">.</span>Logger</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>usrSvc<span class="token punctuation">)</span> <span class="token function">create</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>CreateUserRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// å®ç°é€»è¾‘</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯å¤„ç†">#</a> é”™è¯¯å¤„ç†</h4>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token comment">// âœ… å¥½çš„é”™è¯¯å¤„ç†</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>UserService<span class="token punctuation">)</span> <span class="token function">GetUser</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> id <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    user<span class="token punctuation">,</span> err <span class="token operator">:=</span> s<span class="token punctuation">.</span>repo<span class="token punctuation">.</span><span class="token function">GetByID</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> id<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> errors<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> repository<span class="token punctuation">.</span>ErrNotFound<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>NotFound<span class="token punctuation">,</span> <span class="token string">"user not found: %s"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>Internal<span class="token punctuation">,</span> <span class="token string">"failed to get user: %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> user<span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// âŒ ä¸å¥½çš„é”™è¯¯å¤„ç†</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>UserService<span class="token punctuation">)</span> <span class="token function">GetUser</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> id <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    user<span class="token punctuation">,</span> err <span class="token operator">:=</span> s<span class="token punctuation">.</span>repo<span class="token punctuation">.</span><span class="token function">GetByID</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> id<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err <span class="token comment">// ç›´æ¥è¿”å›åº•å±‚é”™è¯¯</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> user<span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸Šä¸‹æ–‡ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸Šä¸‹æ–‡ä½¿ç”¨">#</a> ä¸Šä¸‹æ–‡ä½¿ç”¨</h4>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token comment">// âœ… æ­£ç¡®ä½¿ç”¨context</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>UserService<span class="token punctuation">)</span> <span class="token function">CreateUser</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>CreateUserRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// æ£€æŸ¥ä¸Šä¸‹æ–‡æ˜¯å¦å·²å–æ¶ˆ</span></span>
<span class="line">    <span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token operator">&lt;-</span>ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span><span class="token function">Err</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ä¼ é€’ä¸Šä¸‹æ–‡åˆ°ä¸‹å±‚è°ƒç”¨</span></span>
<span class="line">    user<span class="token punctuation">,</span> err <span class="token operator">:=</span> s<span class="token punctuation">.</span>repo<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> req<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">return</span> user<span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-é¡¹ç›®ç»“æ„è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_2-é¡¹ç›®ç»“æ„è§„èŒƒ">#</a> 2. é¡¹ç›®ç»“æ„è§„èŒƒ</h3>
<h4 id="åŒ…ç»„ç»‡" tabindex="-1"><a class="header-anchor" href="#åŒ…ç»„ç»‡">#</a> åŒ…ç»„ç»‡</h4>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token comment">// internal/service/user.go</span></span>
<span class="line"><span class="token keyword">package</span> service</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">"context"</span></span>
<span class="line">    </span>
<span class="line">    <span class="token string">"github.com/your-org/vgo/internal/repository"</span></span>
<span class="line">    <span class="token string">"github.com/your-org/vgo/pkg/errors"</span></span>
<span class="line">    pb <span class="token string">"github.com/your-org/vgo/api/proto/user/v1"</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> UserService <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">    repo repository<span class="token punctuation">.</span>UserRepository</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewUserService</span><span class="token punctuation">(</span>repo repository<span class="token punctuation">.</span>UserRepository<span class="token punctuation">)</span> <span class="token operator">*</span>UserService <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token operator">&amp;</span>UserService<span class="token punctuation">{</span>repo<span class="token punctuation">:</span> repo<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ¥å£å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#æ¥å£å®šä¹‰">#</a> æ¥å£å®šä¹‰</h4>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token comment">// internal/repository/user.go</span></span>
<span class="line"><span class="token keyword">package</span> repository</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">"context"</span></span>
<span class="line">    </span>
<span class="line">    <span class="token string">"github.com/your-org/vgo/internal/model"</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// UserRepository ç”¨æˆ·æ•°æ®è®¿é—®æ¥å£</span></span>
<span class="line"><span class="token keyword">type</span> UserRepository <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Create</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> user <span class="token operator">*</span>model<span class="token punctuation">.</span>User<span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line">    <span class="token function">GetByID</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> id <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>model<span class="token punctuation">.</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">GetByEmail</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> email <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>model<span class="token punctuation">.</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">Update</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> user <span class="token operator">*</span>model<span class="token punctuation">.</span>User<span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line">    <span class="token function">Delete</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> id <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line">    <span class="token function">List</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> opts ListOptions<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>model<span class="token punctuation">.</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-æµ‹è¯•è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•è§„èŒƒ">#</a> 3. æµ‹è¯•è§„èŒƒ</h3>
<h4 id="å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#å•å…ƒæµ‹è¯•">#</a> å•å…ƒæµ‹è¯•</h4>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token comment">// internal/service/user_test.go</span></span>
<span class="line"><span class="token keyword">package</span> service</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">"context"</span></span>
<span class="line">    <span class="token string">"testing"</span></span>
<span class="line">    </span>
<span class="line">    <span class="token string">"github.com/stretchr/testify/assert"</span></span>
<span class="line">    <span class="token string">"github.com/stretchr/testify/mock"</span></span>
<span class="line">    </span>
<span class="line">    <span class="token string">"github.com/your-org/vgo/internal/model"</span></span>
<span class="line">    <span class="token string">"github.com/your-org/vgo/internal/repository/mocks"</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">TestUserService_CreateUser</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    tests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">        name    <span class="token builtin">string</span></span>
<span class="line">        setup   <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>mocks<span class="token punctuation">.</span>UserRepository<span class="token punctuation">)</span></span>
<span class="line">        input   <span class="token operator">*</span>model<span class="token punctuation">.</span>User</span>
<span class="line">        want    <span class="token operator">*</span>model<span class="token punctuation">.</span>User</span>
<span class="line">        wantErr <span class="token builtin">bool</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            name<span class="token punctuation">:</span> <span class="token string">"successful creation"</span><span class="token punctuation">,</span></span>
<span class="line">            setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>repo <span class="token operator">*</span>mocks<span class="token punctuation">.</span>UserRepository<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                repo<span class="token punctuation">.</span><span class="token function">On</span><span class="token punctuation">(</span><span class="token string">"Create"</span><span class="token punctuation">,</span> mock<span class="token punctuation">.</span>Anything<span class="token punctuation">,</span> mock<span class="token punctuation">.</span><span class="token function">AnythingOfType</span><span class="token punctuation">(</span><span class="token string">"*model.User"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Return</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            input<span class="token punctuation">:</span> <span class="token operator">&amp;</span>model<span class="token punctuation">.</span>User<span class="token punctuation">{</span></span>
<span class="line">                Email<span class="token punctuation">:</span>    <span class="token string">"test@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">                Username<span class="token punctuation">:</span> <span class="token string">"testuser"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            want<span class="token punctuation">:</span> <span class="token operator">&amp;</span>model<span class="token punctuation">.</span>User<span class="token punctuation">{</span></span>
<span class="line">                Email<span class="token punctuation">:</span>    <span class="token string">"test@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">                Username<span class="token punctuation">:</span> <span class="token string">"testuser"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            wantErr<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            name<span class="token punctuation">:</span> <span class="token string">"repository error"</span><span class="token punctuation">,</span></span>
<span class="line">            setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>repo <span class="token operator">*</span>mocks<span class="token punctuation">.</span>UserRepository<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                repo<span class="token punctuation">.</span><span class="token function">On</span><span class="token punctuation">(</span><span class="token string">"Create"</span><span class="token punctuation">,</span> mock<span class="token punctuation">.</span>Anything<span class="token punctuation">,</span> mock<span class="token punctuation">.</span><span class="token function">AnythingOfType</span><span class="token punctuation">(</span><span class="token string">"*model.User"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Return</span><span class="token punctuation">(</span>errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"db error"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            input<span class="token punctuation">:</span> <span class="token operator">&amp;</span>model<span class="token punctuation">.</span>User<span class="token punctuation">{</span></span>
<span class="line">                Email<span class="token punctuation">:</span>    <span class="token string">"test@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">                Username<span class="token punctuation">:</span> <span class="token string">"testuser"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            want<span class="token punctuation">:</span>    <span class="token boolean">nil</span><span class="token punctuation">,</span></span>
<span class="line">            wantErr<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> tt <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span></span>
<span class="line">        t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>tt<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            repo <span class="token operator">:=</span> <span class="token operator">&amp;</span>mocks<span class="token punctuation">.</span>UserRepository<span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">            tt<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span>repo<span class="token punctuation">)</span></span>
<span class="line">            </span>
<span class="line">            service <span class="token operator">:=</span> <span class="token function">NewUserService</span><span class="token punctuation">(</span>repo<span class="token punctuation">)</span></span>
<span class="line">            </span>
<span class="line">            got<span class="token punctuation">,</span> err <span class="token operator">:=</span> service<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tt<span class="token punctuation">.</span>input<span class="token punctuation">)</span></span>
<span class="line">            </span>
<span class="line">            <span class="token keyword">if</span> tt<span class="token punctuation">.</span>wantErr <span class="token punctuation">{</span></span>
<span class="line">                assert<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">                assert<span class="token punctuation">.</span><span class="token function">Nil</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                assert<span class="token punctuation">.</span><span class="token function">NoError</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">                assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> tt<span class="token punctuation">.</span>want<span class="token punctuation">.</span>Email<span class="token punctuation">,</span> got<span class="token punctuation">.</span>Email<span class="token punctuation">)</span></span>
<span class="line">                assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> tt<span class="token punctuation">.</span>want<span class="token punctuation">.</span>Username<span class="token punctuation">,</span> got<span class="token punctuation">.</span>Username<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            </span>
<span class="line">            repo<span class="token punctuation">.</span><span class="token function">AssertExpectations</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é›†æˆæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#é›†æˆæµ‹è¯•">#</a> é›†æˆæµ‹è¯•</h4>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token comment">// tests/integration/user_test.go</span></span>
<span class="line"><span class="token keyword">package</span> integration</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">"context"</span></span>
<span class="line">    <span class="token string">"testing"</span></span>
<span class="line">    </span>
<span class="line">    <span class="token string">"github.com/stretchr/testify/assert"</span></span>
<span class="line">    <span class="token string">"github.com/stretchr/testify/suite"</span></span>
<span class="line">    </span>
<span class="line">    <span class="token string">"github.com/your-org/vgo/internal/config"</span></span>
<span class="line">    <span class="token string">"github.com/your-org/vgo/internal/server"</span></span>
<span class="line">    pb <span class="token string">"github.com/your-org/vgo/api/proto/user/v1"</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> UserIntegrationTestSuite <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">    suite<span class="token punctuation">.</span>Suite</span>
<span class="line">    server <span class="token operator">*</span>server<span class="token punctuation">.</span>Server</span>
<span class="line">    client pb<span class="token punctuation">.</span>UserServiceClient</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>suite <span class="token operator">*</span>UserIntegrationTestSuite<span class="token punctuation">)</span> <span class="token function">SetupSuite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    cfg <span class="token operator">:=</span> config<span class="token punctuation">.</span><span class="token function">LoadTestConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    suite<span class="token punctuation">.</span>server <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">go</span> suite<span class="token punctuation">.</span>server<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    conn<span class="token punctuation">,</span> err <span class="token operator">:=</span> grpc<span class="token punctuation">.</span><span class="token function">Dial</span><span class="token punctuation">(</span><span class="token string">"localhost:50051"</span><span class="token punctuation">,</span> grpc<span class="token punctuation">.</span><span class="token function">WithInsecure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    suite<span class="token punctuation">.</span><span class="token function">Require</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NoError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    suite<span class="token punctuation">.</span>client <span class="token operator">=</span> pb<span class="token punctuation">.</span><span class="token function">NewUserServiceClient</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>suite <span class="token operator">*</span>UserIntegrationTestSuite<span class="token punctuation">)</span> <span class="token function">TearDownSuite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    suite<span class="token punctuation">.</span>server<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>suite <span class="token operator">*</span>UserIntegrationTestSuite<span class="token punctuation">)</span> <span class="token function">TestCreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    req <span class="token operator">:=</span> <span class="token operator">&amp;</span>pb<span class="token punctuation">.</span>CreateUserRequest<span class="token punctuation">{</span></span>
<span class="line">        Email<span class="token punctuation">:</span>    <span class="token string">"test@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">        Username<span class="token punctuation">:</span> <span class="token string">"testuser"</span><span class="token punctuation">,</span></span>
<span class="line">        Password<span class="token punctuation">:</span> <span class="token string">"password123"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> suite<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    assert<span class="token punctuation">.</span><span class="token function">NoError</span><span class="token punctuation">(</span>suite<span class="token punctuation">.</span><span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    assert<span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span>suite<span class="token punctuation">.</span><span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> resp<span class="token punctuation">.</span>User<span class="token punctuation">.</span>Id<span class="token punctuation">)</span></span>
<span class="line">    assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>suite<span class="token punctuation">.</span><span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>Email<span class="token punctuation">,</span> resp<span class="token punctuation">.</span>User<span class="token punctuation">.</span>Email<span class="token punctuation">)</span></span>
<span class="line">    assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>suite<span class="token punctuation">.</span><span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>Username<span class="token punctuation">,</span> resp<span class="token punctuation">.</span>User<span class="token punctuation">.</span>Username<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">TestUserIntegrationTestSuite</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    suite<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token function">new</span><span class="token punctuation">(</span>UserIntegrationTestSuite<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”§-å¼€å‘å·¥å…·" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-å¼€å‘å·¥å…·">#</a> ğŸ”§ å¼€å‘å·¥å…·</h2>
<h3 id="_1-makefileå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1-makefileå‘½ä»¤">#</a> 1. Makefileå‘½ä»¤</h3>
<div class="language-makefile line-numbers-mode" data-highlighter="prismjs" data-ext="makefile"><pre v-pre><code class="language-makefile"><span class="line"><span class="token comment"># æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤</span></span>
<span class="line">make help</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å¼€å‘ç›¸å…³</span></span>
<span class="line">make dev          <span class="token comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­é‡è½½ï¼‰</span></span>
<span class="line">make build        <span class="token comment"># æ„å»ºé¡¹ç›®</span></span>
<span class="line">make clean        <span class="token comment"># æ¸…ç†æ„å»ºæ–‡ä»¶</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä»£ç ç”Ÿæˆ</span></span>
<span class="line">make generate     <span class="token comment"># ç”Ÿæˆæ‰€æœ‰ä»£ç </span></span>
<span class="line">make proto        <span class="token comment"># ç”ŸæˆProtocol Buffersä»£ç </span></span>
<span class="line">make mock         <span class="token comment"># ç”ŸæˆMockä»£ç </span></span>
<span class="line">make swagger      <span class="token comment"># ç”ŸæˆSwaggeræ–‡æ¡£</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æµ‹è¯•ç›¸å…³</span></span>
<span class="line">make test         <span class="token comment"># è¿è¡Œæ‰€æœ‰æµ‹è¯•</span></span>
<span class="line">make test-unit    <span class="token comment"># è¿è¡Œå•å…ƒæµ‹è¯•</span></span>
<span class="line">make test-integration <span class="token comment"># è¿è¡Œé›†æˆæµ‹è¯•</span></span>
<span class="line">make test-coverage    <span class="token comment"># ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä»£ç è´¨é‡</span></span>
<span class="line">make lint         <span class="token comment"># è¿è¡Œä»£ç æ£€æŸ¥</span></span>
<span class="line">make fmt          <span class="token comment"># æ ¼å¼åŒ–ä»£ç </span></span>
<span class="line">make vet          <span class="token comment"># è¿è¡Œgo vet</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ•°æ®åº“ç›¸å…³</span></span>
<span class="line">make migrate-up   <span class="token comment"># è¿è¡Œæ•°æ®åº“è¿ç§»</span></span>
<span class="line">make migrate-down <span class="token comment"># å›æ»šæ•°æ®åº“è¿ç§»</span></span>
<span class="line">make migrate-create <span class="token comment"># åˆ›å»ºæ–°çš„è¿ç§»æ–‡ä»¶</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Dockerç›¸å…³</span></span>
<span class="line">make docker-build <span class="token comment"># æ„å»ºDockeré•œåƒ</span></span>
<span class="line">make docker-run   <span class="token comment"># è¿è¡ŒDockerå®¹å™¨</span></span>
<span class="line">make docker-push  <span class="token comment"># æ¨é€Dockeré•œåƒ</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å¼€å‘ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-å¼€å‘ç¯å¢ƒé…ç½®">#</a> 2. å¼€å‘ç¯å¢ƒé…ç½®</h3>
<h4 id="vs-codeé…ç½®" tabindex="-1"><a class="header-anchor" href="#vs-codeé…ç½®">#</a> VS Codeé…ç½®</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token comment">// .vscode/settings.json</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"go.useLanguageServer"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"go.lintTool"</span><span class="token operator">:</span> <span class="token string">"golangci-lint"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"go.lintFlags"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"--fast"</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"go.testFlags"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"-v"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"-race"</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"go.testTimeout"</span><span class="token operator">:</span> <span class="token string">"30s"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"go.coverOnSave"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"go.coverOnSingleTest"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"editor.formatOnSave"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"editor.codeActionsOnSave"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">"source.organizeImports"</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token comment">// .vscode/launch.json</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Launch Server"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"go"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"program"</span><span class="token operator">:</span> <span class="token string">"${workspaceFolder}/cmd/server"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"env"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token property">"VGO_ENV"</span><span class="token operator">:</span> <span class="token string">"development"</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">"VGO_CONFIG_PATH"</span><span class="token operator">:</span> <span class="token string">"${workspaceFolder}/configs/development.yaml"</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Debug Test"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"go"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"test"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"program"</span><span class="token operator">:</span> <span class="token string">"${workspaceFolder}"</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"env"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token property">"VGO_ENV"</span><span class="token operator">:</span> <span class="token string">"test"</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">                <span class="token string">"-test.v"</span></span>
<span class="line">            <span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="golangci-linté…ç½®" tabindex="-1"><a class="header-anchor" href="#golangci-linté…ç½®">#</a> golangci-linté…ç½®</h4>
<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre v-pre><code class="language-yaml"><span class="line"><span class="token comment"># .golangci.yml</span></span>
<span class="line"><span class="token key atrule">run</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5m</span>
<span class="line">  <span class="token key atrule">modules-download-mode</span><span class="token punctuation">:</span> readonly</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">linters-settings</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">gocyclo</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">min-complexity</span><span class="token punctuation">:</span> <span class="token number">15</span></span>
<span class="line">  <span class="token key atrule">goconst</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">min-len</span><span class="token punctuation">:</span> <span class="token number">2</span></span>
<span class="line">    <span class="token key atrule">min-occurrences</span><span class="token punctuation">:</span> <span class="token number">2</span></span>
<span class="line">  <span class="token key atrule">gocritic</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">enabled-tags</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> diagnostic</span>
<span class="line">      <span class="token punctuation">-</span> experimental</span>
<span class="line">      <span class="token punctuation">-</span> opinionated</span>
<span class="line">      <span class="token punctuation">-</span> performance</span>
<span class="line">      <span class="token punctuation">-</span> style</span>
<span class="line">  <span class="token key atrule">gofumpt</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">extra-rules</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">gomnd</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">settings</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">mnd</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">checks</span><span class="token punctuation">:</span> argument<span class="token punctuation">,</span>case<span class="token punctuation">,</span>condition<span class="token punctuation">,</span>operation<span class="token punctuation">,</span>return<span class="token punctuation">,</span>assign</span>
<span class="line">  <span class="token key atrule">govet</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">check-shadowing</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">lll</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">line-length</span><span class="token punctuation">:</span> <span class="token number">120</span></span>
<span class="line">  <span class="token key atrule">misspell</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">locale</span><span class="token punctuation">:</span> US</span>
<span class="line">  <span class="token key atrule">nolintlint</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">allow-leading-space</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">allow-unused</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">require-explanation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line">    <span class="token key atrule">require-specific</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">linters</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">disable-all</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">enable</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> bodyclose</span>
<span class="line">    <span class="token punctuation">-</span> deadcode</span>
<span class="line">    <span class="token punctuation">-</span> depguard</span>
<span class="line">    <span class="token punctuation">-</span> dogsled</span>
<span class="line">    <span class="token punctuation">-</span> dupl</span>
<span class="line">    <span class="token punctuation">-</span> errcheck</span>
<span class="line">    <span class="token punctuation">-</span> exportloopref</span>
<span class="line">    <span class="token punctuation">-</span> exhaustive</span>
<span class="line">    <span class="token punctuation">-</span> gochecknoinits</span>
<span class="line">    <span class="token punctuation">-</span> goconst</span>
<span class="line">    <span class="token punctuation">-</span> gocritic</span>
<span class="line">    <span class="token punctuation">-</span> gocyclo</span>
<span class="line">    <span class="token punctuation">-</span> gofmt</span>
<span class="line">    <span class="token punctuation">-</span> gofumpt</span>
<span class="line">    <span class="token punctuation">-</span> gomnd</span>
<span class="line">    <span class="token punctuation">-</span> goprintffuncname</span>
<span class="line">    <span class="token punctuation">-</span> gosec</span>
<span class="line">    <span class="token punctuation">-</span> gosimple</span>
<span class="line">    <span class="token punctuation">-</span> govet</span>
<span class="line">    <span class="token punctuation">-</span> ineffassign</span>
<span class="line">    <span class="token punctuation">-</span> lll</span>
<span class="line">    <span class="token punctuation">-</span> misspell</span>
<span class="line">    <span class="token punctuation">-</span> nakedret</span>
<span class="line">    <span class="token punctuation">-</span> noctx</span>
<span class="line">    <span class="token punctuation">-</span> nolintlint</span>
<span class="line">    <span class="token punctuation">-</span> rowserrcheck</span>
<span class="line">    <span class="token punctuation">-</span> staticcheck</span>
<span class="line">    <span class="token punctuation">-</span> structcheck</span>
<span class="line">    <span class="token punctuation">-</span> stylecheck</span>
<span class="line">    <span class="token punctuation">-</span> typecheck</span>
<span class="line">    <span class="token punctuation">-</span> unconvert</span>
<span class="line">    <span class="token punctuation">-</span> unparam</span>
<span class="line">    <span class="token punctuation">-</span> unused</span>
<span class="line">    <span class="token punctuation">-</span> varcheck</span>
<span class="line">    <span class="token punctuation">-</span> whitespace</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">issues</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">exclude-rules</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> _test\.go</span>
<span class="line">      <span class="token key atrule">linters</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token punctuation">-</span> gomnd</span>
<span class="line">        <span class="token punctuation">-</span> goconst</span>
<span class="line">        <span class="token punctuation">-</span> dupl</span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> internal/mocks/</span>
<span class="line">      <span class="token key atrule">linters</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token punctuation">-</span> gomnd</span>
<span class="line">        <span class="token punctuation">-</span> goconst</span>
<span class="line">        <span class="token punctuation">-</span> dupl</span>
<span class="line">        <span class="token punctuation">-</span> unused</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“š-ç›¸å…³æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#ğŸ“š-ç›¸å…³æ–‡æ¡£">#</a> ğŸ“š ç›¸å…³æ–‡æ¡£</h2>
<ul>
<li><RouteLink to="/api/">APIæ–‡æ¡£</RouteLink></li>
<li><RouteLink to="/deployment/">éƒ¨ç½²æŒ‡å—</RouteLink></li>
<li><RouteLink to="/guide/quick-start.html">å¿«é€Ÿå¼€å§‹</RouteLink></li>
<li><RouteLink to="/development/architecture.html">æ¶æ„è®¾è®¡</RouteLink></li>
<li><RouteLink to="/development/testing.html">æµ‹è¯•æŒ‡å—</RouteLink></li>
<li><RouteLink to="/development/debugging.html">è°ƒè¯•æŒ‡å—</RouteLink></li>
<li><RouteLink to="/development/performance.html">æ€§èƒ½ä¼˜åŒ–</RouteLink></li>
<li><RouteLink to="/development/troubleshooting.html">æ•…éšœæ’é™¤</RouteLink></li>
</ul>
</div></template>


