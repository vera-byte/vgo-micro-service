<template><div><h1 id="ç”¨æˆ·ç®¡ç†-api" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·ç®¡ç†-api">#</a> ç”¨æˆ·ç®¡ç† API</h1>
<p>ç”¨æˆ·ç®¡ç†APIæä¾›äº†å®Œæ•´çš„ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç”¨æˆ·çš„åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤å’Œåˆ—è¡¨æ“ä½œã€‚</p>
<h2 id="ğŸ“‹-api-æ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ“‹-api-æ¦‚è§ˆ">#</a> ğŸ“‹ API æ¦‚è§ˆ</h2>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
<th>æƒé™è¦æ±‚</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>CreateUser</code></td>
<td>åˆ›å»ºæ–°ç”¨æˆ·</td>
<td><code v-pre>iam:CreateUser</code></td>
</tr>
<tr>
<td><code v-pre>GetUser</code></td>
<td>è·å–ç”¨æˆ·ä¿¡æ¯</td>
<td><code v-pre>iam:GetUser</code></td>
</tr>
<tr>
<td><code v-pre>UpdateUser</code></td>
<td>æ›´æ–°ç”¨æˆ·ä¿¡æ¯</td>
<td><code v-pre>iam:UpdateUser</code></td>
</tr>
<tr>
<td><code v-pre>DeleteUser</code></td>
<td>åˆ é™¤ç”¨æˆ·</td>
<td><code v-pre>iam:DeleteUser</code></td>
</tr>
<tr>
<td><code v-pre>ListUsers</code></td>
<td>è·å–ç”¨æˆ·åˆ—è¡¨</td>
<td><code v-pre>iam:ListUsers</code></td>
</tr>
</tbody>
</table>
<h2 id="ğŸ”§-api-è¯¦æƒ…" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-api-è¯¦æƒ…">#</a> ğŸ”§ API è¯¦æƒ…</h2>
<h3 id="createuser-åˆ›å»ºç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#createuser-åˆ›å»ºç”¨æˆ·">#</a> CreateUser - åˆ›å»ºç”¨æˆ·</h3>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·è´¦æˆ·ã€‚</p>
<h4 id="è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚">#</a> è¯·æ±‚</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">CreateUserRequest</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>          <span class="token comment">// ç”¨æˆ·åï¼ˆå¿…éœ€ï¼Œå”¯ä¸€ï¼‰</span></span>
<span class="line">  <span class="token builtin">string</span> display_name <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// æ˜¾ç¤ºåç§°ï¼ˆå¿…éœ€ï¼‰</span></span>
<span class="line">  <span class="token builtin">string</span> email <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>         <span class="token comment">// é‚®ç®±åœ°å€ï¼ˆå¿…éœ€ï¼Œå”¯ä¸€ï¼‰</span></span>
<span class="line">  <span class="token builtin">string</span> password <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>      <span class="token comment">// å¯†ç ï¼ˆå¯é€‰ï¼Œå¦‚æœä¸æä¾›å°†ç”Ÿæˆéšæœºå¯†ç ï¼‰</span></span>
<span class="line">  <span class="token positional-class-name class-name">UserStatus</span> status <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>    <span class="token comment">// ç”¨æˆ·çŠ¶æ€ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºACTIVEï¼‰</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”" tabindex="-1"><a class="header-anchor" href="#å“åº”">#</a> å“åº”</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">CreateUserResponse</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token positional-class-name class-name">User</span> user <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>           <span class="token comment">// åˆ›å»ºçš„ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line">  <span class="token builtin">string</span> password <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>     <span class="token comment">// ç”Ÿæˆçš„å¯†ç ï¼ˆå¦‚æœæœªæä¾›å¯†ç ï¼‰</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹">#</a> ç¤ºä¾‹</h4>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># åˆ›å»ºç”¨æˆ·ï¼ˆæä¾›å¯†ç ï¼‰</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "name": "john_doe",</span>
<span class="line">  "display_name": "John Doe",</span>
<span class="line">  "email": "john@example.com",</span>
<span class="line">  "password": "SecurePassword123!"</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/CreateUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># åˆ›å»ºç”¨æˆ·ï¼ˆè‡ªåŠ¨ç”Ÿæˆå¯†ç ï¼‰</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "name": "jane_smith",</span>
<span class="line">  "display_name": "Jane Smith",</span>
<span class="line">  "email": "jane@example.com"</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/CreateUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å“åº”ç¤ºä¾‹">#</a> å“åº”ç¤ºä¾‹</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"user"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"john_doe"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"display_name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"john@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"USER_STATUS_ACTIVE"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-01T00:00:00Z"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"updated_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-01T00:00:00Z"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é”™è¯¯æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯æƒ…å†µ">#</a> é”™è¯¯æƒ…å†µ</h4>
<table>
<thead>
<tr>
<th>é”™è¯¯ç </th>
<th>è¯´æ˜</th>
<th>è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>INVALID_ARGUMENT</code></td>
<td>ç”¨æˆ·åæˆ–é‚®ç®±ä¸ºç©º</td>
<td>æä¾›æœ‰æ•ˆçš„ç”¨æˆ·åå’Œé‚®ç®±</td>
</tr>
<tr>
<td><code v-pre>ALREADY_EXISTS</code></td>
<td>ç”¨æˆ·åæˆ–é‚®ç®±å·²å­˜åœ¨</td>
<td>ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åæˆ–é‚®ç®±</td>
</tr>
<tr>
<td><code v-pre>PERMISSION_DENIED</code></td>
<td>æ— åˆ›å»ºç”¨æˆ·æƒé™</td>
<td>ç¡®ä¿æœ‰<code v-pre>iam:CreateUser</code>æƒé™</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="getuser-è·å–ç”¨æˆ·ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#getuser-è·å–ç”¨æˆ·ä¿¡æ¯">#</a> GetUser - è·å–ç”¨æˆ·ä¿¡æ¯</h3>
<p>æ ¹æ®ç”¨æˆ·åæˆ–ç”¨æˆ·IDè·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h4 id="è¯·æ±‚-1" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚-1">#</a> è¯·æ±‚</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">GetUserRequest</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">oneof</span> identifier <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// ç”¨æˆ·å</span></span>
<span class="line">    <span class="token builtin">string</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>      <span class="token comment">// ç”¨æˆ·ID</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”-1" tabindex="-1"><a class="header-anchor" href="#å“åº”-1">#</a> å“åº”</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">GetUserResponse</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token positional-class-name class-name">User</span> user <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">// ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1">#</a> ç¤ºä¾‹</h4>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># é€šè¿‡ç”¨æˆ·åè·å–</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "name": "john_doe"</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/GetUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># é€šè¿‡ç”¨æˆ·IDè·å–</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "id": "123"</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/GetUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#å“åº”ç¤ºä¾‹-1">#</a> å“åº”ç¤ºä¾‹</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"user"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"john_doe"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"display_name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"john@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"USER_STATUS_ACTIVE"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-01T00:00:00Z"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"updated_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-01T00:00:00Z"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"last_login_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-15T10:30:00Z"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é”™è¯¯æƒ…å†µ-1" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯æƒ…å†µ-1">#</a> é”™è¯¯æƒ…å†µ</h4>
<table>
<thead>
<tr>
<th>é”™è¯¯ç </th>
<th>è¯´æ˜</th>
<th>è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>INVALID_ARGUMENT</code></td>
<td>æœªæä¾›ç”¨æˆ·åæˆ–ID</td>
<td>æä¾›æœ‰æ•ˆçš„æ ‡è¯†ç¬¦</td>
</tr>
<tr>
<td><code v-pre>NOT_FOUND</code></td>
<td>ç”¨æˆ·ä¸å­˜åœ¨</td>
<td>ç¡®è®¤ç”¨æˆ·åæˆ–IDæ­£ç¡®</td>
</tr>
<tr>
<td><code v-pre>PERMISSION_DENIED</code></td>
<td>æ— æŸ¥çœ‹ç”¨æˆ·æƒé™</td>
<td>ç¡®ä¿æœ‰<code v-pre>iam:GetUser</code>æƒé™</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="updateuser-æ›´æ–°ç”¨æˆ·ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#updateuser-æ›´æ–°ç”¨æˆ·ä¿¡æ¯">#</a> UpdateUser - æ›´æ–°ç”¨æˆ·ä¿¡æ¯</h3>
<p>æ›´æ–°ç°æœ‰ç”¨æˆ·çš„ä¿¡æ¯ã€‚</p>
<h4 id="è¯·æ±‚-2" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚-2">#</a> è¯·æ±‚</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">UpdateUserRequest</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">oneof</span> identifier <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>          <span class="token comment">// ç”¨æˆ·å</span></span>
<span class="line">    <span class="token builtin">string</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>            <span class="token comment">// ç”¨æˆ·ID</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token builtin">string</span> display_name <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token comment">// æ–°çš„æ˜¾ç¤ºåç§°ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line">  <span class="token builtin">string</span> email <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>           <span class="token comment">// æ–°çš„é‚®ç®±åœ°å€ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line">  <span class="token builtin">string</span> password <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>        <span class="token comment">// æ–°å¯†ç ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line">  <span class="token positional-class-name class-name">UserStatus</span> status <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>      <span class="token comment">// æ–°çŠ¶æ€ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line">  <span class="token positional-class-name class-name">google<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>FieldMask</span> update_mask <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>  <span class="token comment">// æ›´æ–°å­—æ®µæ©ç </span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”-2" tabindex="-1"><a class="header-anchor" href="#å“åº”-2">#</a> å“åº”</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">UpdateUserResponse</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token positional-class-name class-name">User</span> user <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>              <span class="token comment">// æ›´æ–°åçš„ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹-2" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2">#</a> ç¤ºä¾‹</h4>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># æ›´æ–°æ˜¾ç¤ºåç§°å’Œé‚®ç®±</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "name": "john_doe",</span>
<span class="line">  "display_name": "John Smith",</span>
<span class="line">  "email": "john.smith@example.com",</span>
<span class="line">  "update_mask": {</span>
<span class="line">    "paths": ["display_name", "email"]</span>
<span class="line">  }</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/UpdateUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># æ›´æ–°ç”¨æˆ·çŠ¶æ€</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "id": "123",</span>
<span class="line">  "status": "USER_STATUS_SUSPENDED",</span>
<span class="line">  "update_mask": {</span>
<span class="line">    "paths": ["status"]</span>
<span class="line">  }</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/UpdateUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># é‡ç½®å¯†ç </span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "name": "john_doe",</span>
<span class="line">  "password": "NewSecurePassword456!",</span>
<span class="line">  "update_mask": {</span>
<span class="line">    "paths": ["password"]</span>
<span class="line">  }</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/UpdateUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”ç¤ºä¾‹-2" tabindex="-1"><a class="header-anchor" href="#å“åº”ç¤ºä¾‹-2">#</a> å“åº”ç¤ºä¾‹</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"user"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"john_doe"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"display_name"</span><span class="token operator">:</span> <span class="token string">"John Smith"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"john.smith@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"USER_STATUS_ACTIVE"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-01T00:00:00Z"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"updated_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-15T14:30:00Z"</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é”™è¯¯æƒ…å†µ-2" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯æƒ…å†µ-2">#</a> é”™è¯¯æƒ…å†µ</h4>
<table>
<thead>
<tr>
<th>é”™è¯¯ç </th>
<th>è¯´æ˜</th>
<th>è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>INVALID_ARGUMENT</code></td>
<td>æ— æ•ˆçš„æ›´æ–°å­—æ®µ</td>
<td>æ£€æŸ¥update_maskå’Œå­—æ®µå€¼</td>
</tr>
<tr>
<td><code v-pre>NOT_FOUND</code></td>
<td>ç”¨æˆ·ä¸å­˜åœ¨</td>
<td>ç¡®è®¤ç”¨æˆ·æ ‡è¯†ç¬¦æ­£ç¡®</td>
</tr>
<tr>
<td><code v-pre>ALREADY_EXISTS</code></td>
<td>é‚®ç®±å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨</td>
<td>ä½¿ç”¨ä¸åŒçš„é‚®ç®±åœ°å€</td>
</tr>
<tr>
<td><code v-pre>PERMISSION_DENIED</code></td>
<td>æ— æ›´æ–°ç”¨æˆ·æƒé™</td>
<td>ç¡®ä¿æœ‰<code v-pre>iam:UpdateUser</code>æƒé™</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="deleteuser-åˆ é™¤ç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#deleteuser-åˆ é™¤ç”¨æˆ·">#</a> DeleteUser - åˆ é™¤ç”¨æˆ·</h3>
<p>åˆ é™¤æŒ‡å®šçš„ç”¨æˆ·è´¦æˆ·ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åˆ é™¤ç”¨æˆ·æ˜¯ä¸å¯é€†æ“ä½œï¼Œä¼šåŒæ—¶åˆ é™¤ç”¨æˆ·çš„æ‰€æœ‰å…³è”æ•°æ®ï¼ˆè®¿é—®å¯†é’¥ã€ç­–ç•¥ç»‘å®šç­‰ï¼‰ã€‚</p>
</div>
<h4 id="è¯·æ±‚-3" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚-3">#</a> è¯·æ±‚</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">DeleteUserRequest</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">oneof</span> identifier <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// ç”¨æˆ·å</span></span>
<span class="line">    <span class="token builtin">string</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>      <span class="token comment">// ç”¨æˆ·ID</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token builtin">bool</span> force <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>       <span class="token comment">// å¼ºåˆ¶åˆ é™¤ï¼ˆå³ä½¿æœ‰å…³è”èµ„æºï¼‰</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”-3" tabindex="-1"><a class="header-anchor" href="#å“åº”-3">#</a> å“åº”</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">DeleteUserResponse</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// ç©ºå“åº”ï¼ŒæˆåŠŸæ—¶æ— è¿”å›å†…å®¹</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹-3" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-3">#</a> ç¤ºä¾‹</h4>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># åˆ é™¤ç”¨æˆ·</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "name": "john_doe"</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/DeleteUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># å¼ºåˆ¶åˆ é™¤ç”¨æˆ·ï¼ˆåŒ…æ‹¬å…³è”èµ„æºï¼‰</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "id": "123",</span>
<span class="line">  "force": true</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/DeleteUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”ç¤ºä¾‹-3" tabindex="-1"><a class="header-anchor" href="#å“åº”ç¤ºä¾‹-3">#</a> å“åº”ç¤ºä¾‹</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h4 id="é”™è¯¯æƒ…å†µ-3" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯æƒ…å†µ-3">#</a> é”™è¯¯æƒ…å†µ</h4>
<table>
<thead>
<tr>
<th>é”™è¯¯ç </th>
<th>è¯´æ˜</th>
<th>è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>INVALID_ARGUMENT</code></td>
<td>æœªæä¾›ç”¨æˆ·æ ‡è¯†ç¬¦</td>
<td>æä¾›ç”¨æˆ·åæˆ–ID</td>
</tr>
<tr>
<td><code v-pre>NOT_FOUND</code></td>
<td>ç”¨æˆ·ä¸å­˜åœ¨</td>
<td>ç¡®è®¤ç”¨æˆ·æ ‡è¯†ç¬¦æ­£ç¡®</td>
</tr>
<tr>
<td><code v-pre>FAILED_PRECONDITION</code></td>
<td>ç”¨æˆ·æœ‰å…³è”èµ„æºä¸”æœªè®¾ç½®force</td>
<td>è®¾ç½®force=trueæˆ–å…ˆåˆ é™¤å…³è”èµ„æº</td>
</tr>
<tr>
<td><code v-pre>PERMISSION_DENIED</code></td>
<td>æ— åˆ é™¤ç”¨æˆ·æƒé™</td>
<td>ç¡®ä¿æœ‰<code v-pre>iam:DeleteUser</code>æƒé™</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="listusers-è·å–ç”¨æˆ·åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#listusers-è·å–ç”¨æˆ·åˆ—è¡¨">#</a> ListUsers - è·å–ç”¨æˆ·åˆ—è¡¨</h3>
<p>è·å–ç³»ç»Ÿä¸­çš„ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œè¿‡æ»¤ã€‚</p>
<h4 id="è¯·æ±‚-4" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚-4">#</a> è¯·æ±‚</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">ListUsersRequest</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin">int32</span> page <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>           <span class="token comment">// é¡µç ï¼ˆä»1å¼€å§‹ï¼‰</span></span>
<span class="line">  <span class="token builtin">int32</span> page_size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>      <span class="token comment">// æ¯é¡µå¤§å°ï¼ˆæœ€å¤§100ï¼‰</span></span>
<span class="line">  <span class="token builtin">string</span> filter <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>        <span class="token comment">// è¿‡æ»¤æ¡ä»¶</span></span>
<span class="line">  <span class="token builtin">string</span> order_by <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>      <span class="token comment">// æ’åºå­—æ®µ</span></span>
<span class="line">  <span class="token builtin">bool</span> desc <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>            <span class="token comment">// æ˜¯å¦é™åº</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è¿‡æ»¤æ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#è¿‡æ»¤æ¡ä»¶">#</a> è¿‡æ»¤æ¡ä»¶</h4>
<p>æ”¯æŒçš„è¿‡æ»¤å­—æ®µï¼š</p>
<ul>
<li><code v-pre>status</code>: ç”¨æˆ·çŠ¶æ€ï¼ˆactive, inactive, suspendedï¼‰</li>
<li><code v-pre>email</code>: é‚®ç®±åœ°å€ï¼ˆæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰</li>
<li><code v-pre>name</code>: ç”¨æˆ·åï¼ˆæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰</li>
<li><code v-pre>created_after</code>: åˆ›å»ºæ—¶é—´ä¹‹å</li>
<li><code v-pre>created_before</code>: åˆ›å»ºæ—¶é—´ä¹‹å‰</li>
</ul>
<h4 id="æ’åºå­—æ®µ" tabindex="-1"><a class="header-anchor" href="#æ’åºå­—æ®µ">#</a> æ’åºå­—æ®µ</h4>
<p>æ”¯æŒçš„æ’åºå­—æ®µï¼š</p>
<ul>
<li><code v-pre>name</code>: ç”¨æˆ·å</li>
<li><code v-pre>email</code>: é‚®ç®±</li>
<li><code v-pre>created_at</code>: åˆ›å»ºæ—¶é—´</li>
<li><code v-pre>updated_at</code>: æ›´æ–°æ—¶é—´</li>
<li><code v-pre>last_login_at</code>: æœ€åç™»å½•æ—¶é—´</li>
</ul>
<h4 id="å“åº”-4" tabindex="-1"><a class="header-anchor" href="#å“åº”-4">#</a> å“åº”</h4>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">ListUsersResponse</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">User</span> users <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token comment">// ç”¨æˆ·åˆ—è¡¨</span></span>
<span class="line">  <span class="token positional-class-name class-name">Pagination</span> pagination <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ†é¡µä¿¡æ¯</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">message</span> <span class="token class-name">Pagination</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin">int32</span> page <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>              <span class="token comment">// å½“å‰é¡µç </span></span>
<span class="line">  <span class="token builtin">int32</span> page_size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>         <span class="token comment">// æ¯é¡µå¤§å°</span></span>
<span class="line">  <span class="token builtin">int32</span> total_count <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>       <span class="token comment">// æ€»è®°å½•æ•°</span></span>
<span class="line">  <span class="token builtin">int32</span> total_pages <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>       <span class="token comment">// æ€»é¡µæ•°</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹-4" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-4">#</a> ç¤ºä¾‹</h4>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># è·å–ç¬¬ä¸€é¡µç”¨æˆ·ï¼ˆé»˜è®¤20æ¡ï¼‰</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "page": 1,</span>
<span class="line">  "page_size": 20</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/ListUsers</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># è·å–æ´»è·ƒç”¨æˆ·</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "page": 1,</span>
<span class="line">  "page_size": 10,</span>
<span class="line">  "filter": "status=active"</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/ListUsers</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># æŒ‰åˆ›å»ºæ—¶é—´é™åºæ’åˆ—</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "page": 1,</span>
<span class="line">  "page_size": 10,</span>
<span class="line">  "order_by": "created_at",</span>
<span class="line">  "desc": true</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/ListUsers</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># å¤åˆè¿‡æ»¤æ¡ä»¶</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "page": 1,</span>
<span class="line">  "page_size": 10,</span>
<span class="line">  "filter": "status=active AND email LIKE %@example.com AND created_after=2024-01-01T00:00:00Z"</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/ListUsers</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“åº”ç¤ºä¾‹-4" tabindex="-1"><a class="header-anchor" href="#å“åº”ç¤ºä¾‹-4">#</a> å“åº”ç¤ºä¾‹</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"users"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"john_doe"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"display_name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"john@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"USER_STATUS_ACTIVE"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-01T00:00:00Z"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"updated_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-01T00:00:00Z"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"last_login_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-15T10:30:00Z"</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"124"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"jane_smith"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"display_name"</span><span class="token operator">:</span> <span class="token string">"Jane Smith"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"jane@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"status"</span><span class="token operator">:</span> <span class="token string">"USER_STATUS_ACTIVE"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-02T00:00:00Z"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"updated_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-02T00:00:00Z"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"last_login_at"</span><span class="token operator">:</span> <span class="token string">"2024-01-14T15:45:00Z"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"pagination"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">"page"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"page_size"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"total_count"</span><span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">"total_pages"</span><span class="token operator">:</span> <span class="token number">8</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é”™è¯¯æƒ…å†µ-4" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯æƒ…å†µ-4">#</a> é”™è¯¯æƒ…å†µ</h4>
<table>
<thead>
<tr>
<th>é”™è¯¯ç </th>
<th>è¯´æ˜</th>
<th>è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>INVALID_ARGUMENT</code></td>
<td>æ— æ•ˆçš„åˆ†é¡µå‚æ•°</td>
<td>æ£€æŸ¥pageå’Œpage_sizeå€¼</td>
</tr>
<tr>
<td><code v-pre>INVALID_ARGUMENT</code></td>
<td>æ— æ•ˆçš„è¿‡æ»¤æ¡ä»¶</td>
<td>æ£€æŸ¥filterè¯­æ³•</td>
</tr>
<tr>
<td><code v-pre>PERMISSION_DENIED</code></td>
<td>æ— åˆ—è¡¨ç”¨æˆ·æƒé™</td>
<td>ç¡®ä¿æœ‰<code v-pre>iam:ListUsers</code>æƒé™</td>
</tr>
</tbody>
</table>
<h2 id="ğŸ“Š-æ•°æ®æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#ğŸ“Š-æ•°æ®æ¨¡å‹">#</a> ğŸ“Š æ•°æ®æ¨¡å‹</h2>
<h3 id="user-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#user-å¯¹è±¡">#</a> User å¯¹è±¡</h3>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">message</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token builtin">string</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token comment">// ç”¨æˆ·IDï¼ˆç³»ç»Ÿç”Ÿæˆï¼‰</span></span>
<span class="line">  <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>                  <span class="token comment">// ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰</span></span>
<span class="line">  <span class="token builtin">string</span> display_name <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>          <span class="token comment">// æ˜¾ç¤ºåç§°</span></span>
<span class="line">  <span class="token builtin">string</span> email <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>                 <span class="token comment">// é‚®ç®±åœ°å€ï¼ˆå”¯ä¸€ï¼‰</span></span>
<span class="line">  <span class="token positional-class-name class-name">UserStatus</span> status <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>            <span class="token comment">// ç”¨æˆ·çŠ¶æ€</span></span>
<span class="line">  <span class="token positional-class-name class-name">google<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>Timestamp</span> created_at <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>     <span class="token comment">// åˆ›å»ºæ—¶é—´</span></span>
<span class="line">  <span class="token positional-class-name class-name">google<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>Timestamp</span> updated_at <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>     <span class="token comment">// æ›´æ–°æ—¶é—´</span></span>
<span class="line">  <span class="token positional-class-name class-name">google<span class="token punctuation">.</span>protobuf<span class="token punctuation">.</span>Timestamp</span> last_login_at <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token comment">// æœ€åç™»å½•æ—¶é—´</span></span>
<span class="line">  <span class="token map class-name">map<span class="token punctuation">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">></span></span> metadata <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// ç”¨æˆ·å…ƒæ•°æ®</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="userstatus-æšä¸¾" tabindex="-1"><a class="header-anchor" href="#userstatus-æšä¸¾">#</a> UserStatus æšä¸¾</h3>
<div class="language-protobuf line-numbers-mode" data-highlighter="prismjs" data-ext="protobuf"><pre v-pre><code class="language-protobuf"><span class="line"><span class="token keyword">enum</span> <span class="token class-name">UserStatus</span> <span class="token punctuation">{</span></span>
<span class="line">  USER_STATUS_UNSPECIFIED <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// æœªæŒ‡å®š</span></span>
<span class="line">  USER_STATUS_ACTIVE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token comment">// æ´»è·ƒ</span></span>
<span class="line">  USER_STATUS_INACTIVE <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>     <span class="token comment">// éæ´»è·ƒ</span></span>
<span class="line">  USER_STATUS_SUSPENDED <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token comment">// å·²æš‚åœ</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”-æƒé™è¦æ±‚" tabindex="-1"><a class="header-anchor" href="#ğŸ”-æƒé™è¦æ±‚">#</a> ğŸ” æƒé™è¦æ±‚</h2>
<h3 id="æ‰€éœ€æƒé™" tabindex="-1"><a class="header-anchor" href="#æ‰€éœ€æƒé™">#</a> æ‰€éœ€æƒé™</h3>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æƒé™</th>
<th>èµ„æº</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆ›å»ºç”¨æˆ·</td>
<td><code v-pre>iam:CreateUser</code></td>
<td><code v-pre>*</code></td>
</tr>
<tr>
<td>è·å–ç”¨æˆ·</td>
<td><code v-pre>iam:GetUser</code></td>
<td><code v-pre>arn:iam::user/*</code> æˆ– <code v-pre>arn:iam::user/${aws:username}</code></td>
</tr>
<tr>
<td>æ›´æ–°ç”¨æˆ·</td>
<td><code v-pre>iam:UpdateUser</code></td>
<td><code v-pre>arn:iam::user/*</code> æˆ– <code v-pre>arn:iam::user/${aws:username}</code></td>
</tr>
<tr>
<td>åˆ é™¤ç”¨æˆ·</td>
<td><code v-pre>iam:DeleteUser</code></td>
<td><code v-pre>arn:iam::user/*</code></td>
</tr>
<tr>
<td>åˆ—è¡¨ç”¨æˆ·</td>
<td><code v-pre>iam:ListUsers</code></td>
<td><code v-pre>*</code></td>
</tr>
</tbody>
</table>
<h3 id="ç­–ç•¥ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ç­–ç•¥ç¤ºä¾‹">#</a> ç­–ç•¥ç¤ºä¾‹</h3>
<h4 id="ç®¡ç†å‘˜ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ç®¡ç†å‘˜ç­–ç•¥">#</a> ç®¡ç†å‘˜ç­–ç•¥</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2025-01-01"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"iam:CreateUser"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:GetUser"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:UpdateUser"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:DeleteUser"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:ListUsers"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç”¨æˆ·è‡ªç®¡ç†ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·è‡ªç®¡ç†ç­–ç•¥">#</a> ç”¨æˆ·è‡ªç®¡ç†ç­–ç•¥</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2025-01-01"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"iam:GetUser"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:UpdateUser"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"arn:iam::user/${aws:username}"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åªè¯»ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#åªè¯»ç­–ç•¥">#</a> åªè¯»ç­–ç•¥</h4>
<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre v-pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2025-01-01"</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">"iam:GetUser"</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">"iam:ListUsers"</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ› ï¸-ä½¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ğŸ› ï¸-ä½¿ç”¨ç¤ºä¾‹">#</a> ğŸ› ï¸ ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 id="go-å®¢æˆ·ç«¯ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#go-å®¢æˆ·ç«¯ç¤ºä¾‹">#</a> Go å®¢æˆ·ç«¯ç¤ºä¾‹</h3>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token string">"context"</span></span>
<span class="line">    <span class="token string">"fmt"</span></span>
<span class="line">    <span class="token string">"log"</span></span>
<span class="line">    </span>
<span class="line">    <span class="token string">"google.golang.org/grpc"</span></span>
<span class="line">    <span class="token string">"google.golang.org/grpc/credentials/insecure"</span></span>
<span class="line">    <span class="token string">"google.golang.org/protobuf/types/known/fieldmaskpb"</span></span>
<span class="line">    </span>
<span class="line">    iamv1 <span class="token string">"github.com/your-org/vgo/api/iam/v1"</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// è¿æ¥åˆ°æœåŠ¡</span></span>
<span class="line">    conn<span class="token punctuation">,</span> err <span class="token operator">:=</span> grpc<span class="token punctuation">.</span><span class="token function">Dial</span><span class="token punctuation">(</span><span class="token string">"localhost:50051"</span><span class="token punctuation">,</span> grpc<span class="token punctuation">.</span><span class="token function">WithTransportCredentials</span><span class="token punctuation">(</span>insecure<span class="token punctuation">.</span><span class="token function">NewCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥å¤±è´¥: %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">defer</span> conn<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    client <span class="token operator">:=</span> iamv1<span class="token punctuation">.</span><span class="token function">NewIAMClient</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span></span>
<span class="line">    ctx <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// åˆ›å»ºç”¨æˆ·</span></span>
<span class="line">    createResp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>iamv1<span class="token punctuation">.</span>CreateUserRequest<span class="token punctuation">{</span></span>
<span class="line">        Name<span class="token punctuation">:</span>        <span class="token string">"test_user"</span><span class="token punctuation">,</span></span>
<span class="line">        DisplayName<span class="token punctuation">:</span> <span class="token string">"Test User"</span><span class="token punctuation">,</span></span>
<span class="line">        Email<span class="token punctuation">:</span>       <span class="token string">"test@example.com"</span><span class="token punctuation">,</span></span>
<span class="line">        Password<span class="token punctuation">:</span>    <span class="token string">"SecurePassword123!"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"åˆ›å»ºç”¨æˆ·å¤±è´¥: %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åˆ›å»ºæˆåŠŸ: %v\n"</span><span class="token punctuation">,</span> createResp<span class="token punctuation">.</span>User<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// è·å–ç”¨æˆ·</span></span>
<span class="line">    getResp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">GetUser</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>iamv1<span class="token punctuation">.</span>GetUserRequest<span class="token punctuation">{</span></span>
<span class="line">        Identifier<span class="token punctuation">:</span> <span class="token operator">&amp;</span>iamv1<span class="token punctuation">.</span>GetUserRequest_Name<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">"test_user"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è·å–ç”¨æˆ·å¤±è´¥: %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·ä¿¡æ¯: %v\n"</span><span class="token punctuation">,</span> getResp<span class="token punctuation">.</span>User<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// æ›´æ–°ç”¨æˆ·</span></span>
<span class="line">    updateResp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">UpdateUser</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>iamv1<span class="token punctuation">.</span>UpdateUserRequest<span class="token punctuation">{</span></span>
<span class="line">        Identifier<span class="token punctuation">:</span>  <span class="token operator">&amp;</span>iamv1<span class="token punctuation">.</span>UpdateUserRequest_Name<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">"test_user"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        DisplayName<span class="token punctuation">:</span> <span class="token string">"Updated Test User"</span><span class="token punctuation">,</span></span>
<span class="line">        UpdateMask<span class="token punctuation">:</span> <span class="token operator">&amp;</span>fieldmaskpb<span class="token punctuation">.</span>FieldMask<span class="token punctuation">{</span></span>
<span class="line">            Paths<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"display_name"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ›´æ–°ç”¨æˆ·å¤±è´¥: %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·æ›´æ–°æˆåŠŸ: %v\n"</span><span class="token punctuation">,</span> updateResp<span class="token punctuation">.</span>User<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// è·å–ç”¨æˆ·åˆ—è¡¨</span></span>
<span class="line">    listResp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">ListUsers</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>iamv1<span class="token punctuation">.</span>ListUsersRequest<span class="token punctuation">{</span></span>
<span class="line">        Page<span class="token punctuation">:</span>     <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">        PageSize<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">        Filter<span class="token punctuation">:</span>   <span class="token string">"status=active"</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥: %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åˆ—è¡¨: %v\n"</span><span class="token punctuation">,</span> listResp<span class="token punctuation">.</span>Users<span class="token punctuation">)</span></span>
<span class="line">    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"åˆ†é¡µä¿¡æ¯: %v\n"</span><span class="token punctuation">,</span> listResp<span class="token punctuation">.</span>Pagination<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// åˆ é™¤ç”¨æˆ·</span></span>
<span class="line">    <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">DeleteUser</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>iamv1<span class="token punctuation">.</span>DeleteUserRequest<span class="token punctuation">{</span></span>
<span class="line">        Identifier<span class="token punctuation">:</span> <span class="token operator">&amp;</span>iamv1<span class="token punctuation">.</span>DeleteUserRequest_Name<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">"test_user"</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤ç”¨æˆ·å¤±è´¥: %v"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åˆ é™¤æˆåŠŸ"</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="python-å®¢æˆ·ç«¯ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#python-å®¢æˆ·ç«¯ç¤ºä¾‹">#</a> Python å®¢æˆ·ç«¯ç¤ºä¾‹</h3>
<div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre v-pre><code class="language-python"><span class="line"><span class="token keyword">import</span> grpc</span>
<span class="line"><span class="token keyword">from</span> google<span class="token punctuation">.</span>protobuf <span class="token keyword">import</span> field_mask_pb2</span>
<span class="line"><span class="token keyword">from</span> iam<span class="token punctuation">.</span>v1 <span class="token keyword">import</span> iam_pb2</span>
<span class="line"><span class="token keyword">from</span> iam<span class="token punctuation">.</span>v1 <span class="token keyword">import</span> iam_pb2_grpc</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># è¿æ¥åˆ°æœåŠ¡</span></span>
<span class="line">    <span class="token keyword">with</span> grpc<span class="token punctuation">.</span>insecure_channel<span class="token punctuation">(</span><span class="token string">'localhost:50051'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> channel<span class="token punctuation">:</span></span>
<span class="line">        client <span class="token operator">=</span> iam_pb2_grpc<span class="token punctuation">.</span>IAMStub<span class="token punctuation">(</span>channel<span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># åˆ›å»ºç”¨æˆ·</span></span>
<span class="line">        create_request <span class="token operator">=</span> iam_pb2<span class="token punctuation">.</span>CreateUserRequest<span class="token punctuation">(</span></span>
<span class="line">            name<span class="token operator">=</span><span class="token string">'test_user'</span><span class="token punctuation">,</span></span>
<span class="line">            display_name<span class="token operator">=</span><span class="token string">'Test User'</span><span class="token punctuation">,</span></span>
<span class="line">            email<span class="token operator">=</span><span class="token string">'test@example.com'</span><span class="token punctuation">,</span></span>
<span class="line">            password<span class="token operator">=</span><span class="token string">'SecurePassword123!'</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">        create_response <span class="token operator">=</span> client<span class="token punctuation">.</span>CreateUser<span class="token punctuation">(</span>create_request<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'ç”¨æˆ·åˆ›å»ºæˆåŠŸ: </span><span class="token interpolation"><span class="token punctuation">{</span>create_response<span class="token punctuation">.</span>user<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># è·å–ç”¨æˆ·</span></span>
<span class="line">        get_request <span class="token operator">=</span> iam_pb2<span class="token punctuation">.</span>GetUserRequest<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'test_user'</span><span class="token punctuation">)</span></span>
<span class="line">        get_response <span class="token operator">=</span> client<span class="token punctuation">.</span>GetUser<span class="token punctuation">(</span>get_request<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'ç”¨æˆ·ä¿¡æ¯: </span><span class="token interpolation"><span class="token punctuation">{</span>get_response<span class="token punctuation">.</span>user<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># æ›´æ–°ç”¨æˆ·</span></span>
<span class="line">        update_mask <span class="token operator">=</span> field_mask_pb2<span class="token punctuation">.</span>FieldMask<span class="token punctuation">(</span>paths<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'display_name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        update_request <span class="token operator">=</span> iam_pb2<span class="token punctuation">.</span>UpdateUserRequest<span class="token punctuation">(</span></span>
<span class="line">            name<span class="token operator">=</span><span class="token string">'test_user'</span><span class="token punctuation">,</span></span>
<span class="line">            display_name<span class="token operator">=</span><span class="token string">'Updated Test User'</span><span class="token punctuation">,</span></span>
<span class="line">            update_mask<span class="token operator">=</span>update_mask</span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">        update_response <span class="token operator">=</span> client<span class="token punctuation">.</span>UpdateUser<span class="token punctuation">(</span>update_request<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'ç”¨æˆ·æ›´æ–°æˆåŠŸ: </span><span class="token interpolation"><span class="token punctuation">{</span>update_response<span class="token punctuation">.</span>user<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># è·å–ç”¨æˆ·åˆ—è¡¨</span></span>
<span class="line">        list_request <span class="token operator">=</span> iam_pb2<span class="token punctuation">.</span>ListUsersRequest<span class="token punctuation">(</span></span>
<span class="line">            page<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">            page_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token builtin">filter</span><span class="token operator">=</span><span class="token string">'status=active'</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">        list_response <span class="token operator">=</span> client<span class="token punctuation">.</span>ListUsers<span class="token punctuation">(</span>list_request<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'ç”¨æˆ·åˆ—è¡¨: </span><span class="token interpolation"><span class="token punctuation">{</span>list_response<span class="token punctuation">.</span>users<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'åˆ†é¡µä¿¡æ¯: </span><span class="token interpolation"><span class="token punctuation">{</span>list_response<span class="token punctuation">.</span>pagination<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment"># åˆ é™¤ç”¨æˆ·</span></span>
<span class="line">        delete_request <span class="token operator">=</span> iam_pb2<span class="token punctuation">.</span>DeleteUserRequest<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'test_user'</span><span class="token punctuation">)</span></span>
<span class="line">        client<span class="token punctuation">.</span>DeleteUser<span class="token punctuation">(</span>delete_request<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ç”¨æˆ·åˆ é™¤æˆåŠŸ'</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span></span>
<span class="line">    main<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”-æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ”-æœ€ä½³å®è·µ">#</a> ğŸ” æœ€ä½³å®è·µ</h2>
<h3 id="_1-ç”¨æˆ·åè§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_1-ç”¨æˆ·åè§„èŒƒ">#</a> 1. ç”¨æˆ·åè§„èŒƒ</h3>
<ul>
<li>ä½¿ç”¨å°å†™å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿</li>
<li>é•¿åº¦åœ¨3-32ä¸ªå­—ç¬¦ä¹‹é—´</li>
<li>é¿å…ä½¿ç”¨ä¿ç•™è¯ï¼ˆadminã€rootã€systemç­‰ï¼‰</li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># å¥½çš„ç”¨æˆ·åç¤ºä¾‹</span></span>
<span class="line"><span class="token string">"john_doe"</span></span>
<span class="line"><span class="token string">"user_123"</span></span>
<span class="line"><span class="token string">"service_account"</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é¿å…çš„ç”¨æˆ·å</span></span>
<span class="line"><span class="token string">"Admin"</span></span>
<span class="line"><span class="token string">"root"</span></span>
<span class="line"><span class="token string">"123"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å¯†ç ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_2-å¯†ç ç­–ç•¥">#</a> 2. å¯†ç ç­–ç•¥</h3>
<ul>
<li>æœ€å°‘8ä¸ªå­—ç¬¦</li>
<li>åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦</li>
<li>å®šæœŸæ›´æ¢å¯†ç </li>
</ul>
<h3 id="_3-é‚®ç®±éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_3-é‚®ç®±éªŒè¯">#</a> 3. é‚®ç®±éªŒè¯</h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token comment"># åˆ›å»ºç”¨æˆ·åå‘é€éªŒè¯é‚®ä»¶</span></span>
<span class="line">grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">'{</span>
<span class="line">  "name": "new_user",</span>
<span class="line">  "display_name": "New User",</span>
<span class="line">  "email": "new@example.com",</span>
<span class="line">  "status": "USER_STATUS_INACTIVE"</span>
<span class="line">}'</span> localhost:50051 iam.v1.IAM/CreateUser</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-æ‰¹é‡æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_4-æ‰¹é‡æ“ä½œ">#</a> 4. æ‰¹é‡æ“ä½œ</h3>
<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre v-pre><code class="language-bash"><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ‰¹é‡åˆ›å»ºç”¨æˆ·è„šæœ¬</span></span>
<span class="line"><span class="token assign-left variable">users_file</span><span class="token operator">=</span><span class="token string">"users.txt"</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">','</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> name display_name email<span class="token punctuation">;</span> <span class="token keyword">do</span></span>
<span class="line">    grpcurl <span class="token parameter variable">-plaintext</span> <span class="token parameter variable">-d</span> <span class="token string">"{</span>
<span class="line">        <span class="token entity" title="\&quot;">\"</span>name<span class="token entity" title="\&quot;">\"</span>: <span class="token entity" title="\&quot;">\"</span><span class="token variable">$name</span><span class="token entity" title="\&quot;">\"</span>,</span>
<span class="line">        <span class="token entity" title="\&quot;">\"</span>display_name<span class="token entity" title="\&quot;">\"</span>: <span class="token entity" title="\&quot;">\"</span><span class="token variable">$display_name</span><span class="token entity" title="\&quot;">\"</span>,</span>
<span class="line">        <span class="token entity" title="\&quot;">\"</span>email<span class="token entity" title="\&quot;">\"</span>: <span class="token entity" title="\&quot;">\"</span><span class="token variable">$email</span><span class="token entity" title="\&quot;">\"</span></span>
<span class="line">    }"</span> localhost:50051 iam.v1.IAM/CreateUser</span>
<span class="line">    </span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">"Created user: <span class="token variable">$name</span>"</span></span>
<span class="line">    <span class="token function">sleep</span> <span class="token number">0.1</span>  <span class="token comment"># é¿å…è¿‡å¿«è¯·æ±‚</span></span>
<span class="line"><span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token string">"<span class="token variable">$users_file</span>"</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_5-é”™è¯¯å¤„ç†">#</a> 5. é”™è¯¯å¤„ç†</h3>
<div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go"><pre v-pre><code class="language-go"><span class="line"><span class="token comment">// å¸¦é‡è¯•çš„ç”¨æˆ·åˆ›å»º</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">createUserWithRetry</span><span class="token punctuation">(</span>client iamv1<span class="token punctuation">.</span>IAMClient<span class="token punctuation">,</span> req <span class="token operator">*</span>iamv1<span class="token punctuation">.</span>CreateUserRequest<span class="token punctuation">,</span> maxRetries <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>iamv1<span class="token punctuation">.</span>CreateUserResponse<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxRetries<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">        resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> resp<span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// æ£€æŸ¥æ˜¯å¦ä¸ºå¯é‡è¯•é”™è¯¯</span></span>
<span class="line">        <span class="token keyword">if</span> status<span class="token punctuation">.</span><span class="token function">Code</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">==</span> codes<span class="token punctuation">.</span>AlreadyExists <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err <span class="token comment">// ä¸é‡è¯•</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°"</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸš¨-æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#ğŸš¨-æ³¨æ„äº‹é¡¹">#</a> ğŸš¨ æ³¨æ„äº‹é¡¹</h2>
<h3 id="å®‰å…¨è€ƒè™‘" tabindex="-1"><a class="header-anchor" href="#å®‰å…¨è€ƒè™‘">#</a> å®‰å…¨è€ƒè™‘</h3>
<ol>
<li>
<p><strong>å¯†ç å®‰å…¨</strong>ï¼š</p>
<ul>
<li>ä¸è¦åœ¨æ—¥å¿—ä¸­è®°å½•å¯†ç </li>
<li>ä½¿ç”¨å¼ºå¯†ç ç­–ç•¥</li>
<li>å®šæœŸè½®æ¢å¯†ç </li>
</ul>
</li>
<li>
<p><strong>æƒé™æ§åˆ¶</strong>ï¼š</p>
<ul>
<li>éµå¾ªæœ€å°æƒé™åŸåˆ™</li>
<li>å®šæœŸå®¡æŸ¥ç”¨æˆ·æƒé™</li>
<li>ä½¿ç”¨èµ„æºçº§æƒé™æ§åˆ¶</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®ä¿æŠ¤</strong>ï¼š</p>
<ul>
<li>æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨</li>
<li>å®¡è®¡ç”¨æˆ·æ“ä½œ</li>
<li>å®šæœŸå¤‡ä»½ç”¨æˆ·æ•°æ®</li>
</ul>
</li>
</ol>
<h3 id="æ€§èƒ½ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–">#</a> æ€§èƒ½ä¼˜åŒ–</h3>
<ol>
<li>
<p><strong>åˆ†é¡µæŸ¥è¯¢</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨åˆé€‚çš„é¡µé¢å¤§å°</li>
<li>é¿å…æŸ¥è¯¢è¿‡å¤§çš„æ•°æ®é›†</li>
<li>ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢</li>
</ul>
</li>
<li>
<p><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>ç¼“å­˜é¢‘ç¹è®¿é—®çš„ç”¨æˆ·ä¿¡æ¯</li>
<li>è®¾ç½®åˆé€‚çš„ç¼“å­˜è¿‡æœŸæ—¶é—´</li>
<li>åŠæ—¶æ›´æ–°ç¼“å­˜</li>
</ul>
</li>
<li>
<p><strong>è¿æ¥ç®¡ç†</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨è¿æ¥æ± </li>
<li>è®¾ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´</li>
<li>å¤„ç†è¿æ¥å¼‚å¸¸</li>
</ul>
</li>
</ol>
<hr>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨ç”¨æˆ·æ“ä½œå®¡è®¡ï¼Œè®°å½•æ‰€æœ‰ç”¨æˆ·ç®¡ç†æ“ä½œçš„è¯¦ç»†æ—¥å¿—ã€‚</p>
</div>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åˆ é™¤ç”¨æˆ·æ“ä½œä¸å¯é€†ï¼Œè¯·è°¨æ…æ“ä½œã€‚å»ºè®®å…ˆå°†ç”¨æˆ·çŠ¶æ€è®¾ç½®ä¸ºSUSPENDEDï¼Œç¡®è®¤æ— å½±å“åå†åˆ é™¤ã€‚</p>
</div>
</div></template>


